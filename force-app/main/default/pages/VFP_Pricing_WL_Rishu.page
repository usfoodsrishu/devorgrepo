<!-- Name : VFP_Pricing_WL -->
<!--Author:Accenture IDC Team-->
<!--Date Created:21/07/2016-->
<!--Description:This page is used to watch list products page-->
<!--Modifications:
09 June 2017    Nitin Goyal(Appirio)  Fixing the UI issues observed in Lightning environment.
13 June 2017    Nitin Goyal(Appirio)  Removed extra scroll bars on body and adjusted Font size for LearnMore Modal
29 Aug  2017    Aman Dua(Appirio)     Added css to .fr class to deactivate span:hover on the elements of "View Pricicng For"-dropdown list as per SFS-1482
26 Sep  2017    Aman Dua(Appirio)     Fixed resolution checks for Console App view as per SFS-1790
22 Nov  2017    Deepanshu(Appirio)    Code added to display the green tick SSCD-207
26 Nov  2017    Deepanshu(Appirio)    Code added to display the % products SSCD-208
16 Dec  2017    Deepanshu(Appirio)    Code added for SSCD-296, Auto Scrolling   
21 Dec  2017    Deepanshu(Appirio)    Code added for SSCD-292 Sorting & SSCD-297 new icons
09 Jan  2018    Nitin Goyal(Appirio)  Fixed CSS issues for iPad Landscape mode
12 Jan  2018    Aman Dua(Appirio)     Updated for SSCD-473 to use Web service Remote Method and display new Prod Inventory details
17 Jan  2018    Aman Dua(Appirio)     Updated for SSCD-468 search functionality
07 May  2018    Aman Dua(Appirio)     Updated for SSDPI-199
08 May  2018    Aman Dua(Appirio)     Updated for SSDPI-199
09 May  2018    Aman Dua(Appirio)     Updated for CSS fix
16 May  2018    Aman Dua(Appirio)     Updated for SSCD-1090
22 May  2018    Aman Dua(Appirio)     Updated for SSCD-1207
24 May  2018    Aman Dua(Appirio)     Updated for SSCD-1238/1239
25 May  2018    Aman Dua(Appirio)     Updated for SSCD-1246
25 May  2018    Keith Ransom(Appirio) Updated for SSCD-221
Oct 16th 2018 sowmya madarapu updated for SSDR23-541
-->
<!-- Vyas - Nov19 - Added below extensions attribute -->
<apex:page controller="VFC_PricingEnquiry" extensions="CustomerMetricDataHandler" sidebar="false" id="pricingEnquiry_Page" showHeader="true" docType="html-5.0" tabStyle="Maintenance__tab" standardStylesheets="true">
    <!-- <apex:messages> -->

    <apex:messages style="color:red" />
    <br/>

    <head>
        <script>
            if ('{!!externalUser}') {
                (function(i, s, o, g, r, a, m) {
                    i['GoogleAnalyticsObject'] = r;
                    i[r] = i[r] || function() {
                        (i[r].q = i[r].q || []).push(arguments)
                    }, i[r].l = 1 * new Date();
                    a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                    a.async = 1;
                    a.src = g;
                    m.parentNode.insertBefore(a, m)
                })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

                ga('create', '{!googleAnalyticsId}', 'auto');
                ga('set', 'dataSource', 'crm');
                ga('set', 'location', '/VFP_Pricing_WL');
                ga('set', 'title', 'Pricing Watch List');
                ga('set', 'dimension1', '{!objUserProfName.UserRole.Name}'.substring(0, 4));
                ga('send', 'pageview');
            }
        </script>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <apex:stylesheet value="{!URLFOR($Resource.sf1bootstrap, '/bootstrap-sf1-0.1.0-beta.5/dist/css/bootstrap-namespaced.min.css')}" />
        <apex:includeScript value="{!URLFOR($Resource.USfoodsUI, '/USfoodsUI/js/jquery-1.10.2.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.USfoodsUI, '/USfoodsUI/js/bootstrap.min.js')}" />
        <apex:includeScript value="{!URLFOR($Resource.PricingUI, '/PricingUI/bootstrap-select.js')}" />
        <apex:stylesheet value="{!URLFOR($Resource.PricingUI, '/PricingUI/PricingRequirement.css')}" />
        <apex:stylesheet value="{!URLFOR($Resource.PricingUI, '/PricingUI/bootstrap-select.css')}" />
        <script src="Scripts/bootstrap.js"></script>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
        <!--RM 01/18/2017 :US1723-->
        <script src="/soap/ajax/28.0/connection.js" type="text/javascript"></script>
        <script src="/soap/ajax/28.0/apex.js" type="text/javascript"></script>
        <!-- RM 01/17/2017 -->
        <style type="text/css">            
            .cls_TD_LrnMr {
                width: 207% !important;
                border-top: 1px solid #AAA !important;
                padding: 0px !important;
            }

            .cls_Prd_Details {
                width: 50% !important;
            }

            th {
                background-color: #F0F1F2;
            }

            .col-md-12.col-sm-12.font21NB {
                color: #CF4520;
                font-size: 21px;
                font-family: Arial;
                margin-top: 2%;
                /*   margin-left: 4%;  */
                font-weight: bold;
                padding-left: 0 !important;
            }

            .font12NLH16 {
                font-size: 12px;
                color: #3b3b3b !important;
                font-family: Arial !important;
                line-height: 16px;
            }

            font12NLH16Green {
                font-family: Arial !important;
            }

            .font13NR3b {
                font-size: 13px;
                color: #3b3b3b !important;
                font-family: HelveticaNeue-Arial !important;
            }

            .font11NCB {
                font-size: 13px;
                color: #5C8727 !important;
                font-weight: bold;
                font-family: Arial !important;
            }

            .font13NCBWhite {
                font-size: 13px;
                color: #ffffff !important;
                font-family: HelveticaNeue-CondensedBold !important;
            }

            .font12NCB {
                font-size: 13px;
                font-weight: bold;
                color: #3b3b3b !important;
                font-family: Arial !important;
            }

            .font21NCB {
                font-size: 18px;
                color: #3b3b3b !important;
                font-family: Arial !important;
                font-weight: bold;
            }

            .font48NCB {
                font-size: 48px;
                color: #CF4520 !important;
                font-family: Arial !important;
                font-weight: bold !important;
            }

            .font18NCB {
                font-weight: bold;
                /*  height: 23px;  */
                float: right;
            }

            .whiteBck {
                background-color: #ffffff !important;
            }

            .silverBck {
                background-color: #f3f1f0 !important;
            }

            .lightGrayBck {
                background: #d8d8d8 !important;
            }

            .dullGrayBck {
                background-color: #f3f1f0 !important;
            }

            .oliveGreenBck {
                background-color: #B0BC22 !important;
            }

            .bottleGreenBck {
                background-color: #5C8727 !important;
            }

            .transparentBck {
                background-color: transparent !important;
            }

            .smokeGrayClr {
                color: #3b3b3b !important;
            }

            div.dropdown-menu>ul.dropdown-menu>li.selected {
                background-color: red !important;
            }

            .row1-3 select,
            .row1-3home select {
                background: #FFF;
                font-size: 12px;
                font-family: 'Open Sans', sans-serif;
                width: 94%;
                margin-left: 3%;
                margin-right: 3%;
                height: 40px;
                line-height: 40px;
                border: none;
                padding-left: 10px;
                border-radius: none;
                margin-bottom: 5px;
                -moz-appearance: none;
            }

            .row1-3 select option,
            .row1-3home select option {
                color: #01afd2;
            }

            .row1-3 select option:not(:checked),
            .row1-3home select option:not(:checked) {
                color: #9fa7b4;
            }

            div.dropdown-menu li:hover span:hover {
                display: inline-block;
                background-color: #228B22;
                width: 100%;
                color: #FFF;
            }

            .bootstrap .panel-default {
                border: 2px solid #c2c2c2;
            }

            .whiteBck.bootstrap.col-md-1.product-count {
                padding: 25px 0px;
            }

            .bootstrap .table-bordered,
            .bootstrap .table-bordered>tbody>tr>td,
            .bootstrap .table-bordered>tbody>tr>th,
            .bootstrap .table-bordered>tfoot>tr>td,
            .bootstrap .table-bordered>tfoot>tr>th,
            .bootstrap .table-bordered>thead>tr>td,
            .bootstrap .table-bordered>thead>tr>th {
                border: 1px dotted #AAA;
                border-bottom: 1px solid #AAA;
                padding-top: 0;
                padding-bottom: 0;
            }

            .bgcolor {
                background: #FFF !important;
            }

            .fontprdwl {
                font-weight: bold;
                font-size: 130%;
                font-weight: 900;
                margin-top: 28px;
            }


            * {
                border-radius: 0 !important;
            }

            .bootstrap.col-md-4.col-sm-4.pricing_section-right {
                border: 1px solid #AAA;
                background-color: #f0f1f2;
                /*width: 39% !important;*/  /*Updated by ADUA for CSS-Improvisation*/
                /*     height:600px;   
                margin-top:-10.4%;  */
                padding: 0;
                float: right;
            }

            .selected {
                background-color: #ffffff;
            }

            .even {
                background-color: #fff2D4 !important;
                border: 2px solid #E7A614;
            } /* RM 01/18/2017:US1723 */
            .odd {
                background-color: #FFFFFF !important;
            }

            span#spBar {
                padding-right: 6px;
                padding-left: 6px;
            }

            span#spWWP {
                padding-right: 6px;
            }

            div#divAccName {
                color: #000000;
                margin-left: 0%;
                width: 200%;
                font-size: large;
                line-height: 45px;
                font-weight: 600;
                /*padding-top: 21%;*/
            }

            .bootstrap select,
            .bootstrap textarea {
                color: white;
            }

            option {
                background-color: white;
                color: black;
            }

            tr#noPrdsId {
                border: 1px solid #AAA;
                border-left: hidden;
                border-right: hidden;
                font-weight: 700;
                font-stretch: expanded;
                font-size: larger;
            }

            tbody#tblProducts {
                border: 1px solid #AAA;

                border-top: hidden;
            }



            tr#noProductsId {
                border-bottom: 2px solid #CFD0D2;
            }

            th#idHeaderRow {
                text-align: center;
                padding: 1% 0% 0% 0%;
                COLOR: #3B3B3B;
                font-size: 13px;
                font-family: Arial;
            }

            div#divPosCust {
                padding: 0em 5em 0em 0em;
                /*  margin: 0% 0% -2% -5%; */
                font-size: 18PX;
                font-weight: bold;
                color: #3B3B3B;
                font-family: Arial;
                margin-left: -1%;
            }

            #load {
                margin: 15.5%;
                margin-left: 0%;
                padding-top: 50%;
                width: 100%;
                height: 75%;
                position: absolute;
                z-index: 9999;
                background: url("{!$Resource.Product_Search_Image}") no-repeat center center rgba(0,
                0,
                0,
                0);
            }

            div#idInfo {
                text-align: center;
                margin: -22%;
                font-weight: bold;
            }

            .idInformValue {
                color: white;
                background-color: #005581 !important;
                border: 1px solid white;
                font-size: 13px;
                font-weight: bold;
                font-family: Arial;
                padding: 10px;
            }

            .imgWrap {
                position: relative;
            }

            .imgDescription {
                position: absolute;
                width: 100px;
                z-index: 1;
                top: 87%;
                left: 0%;
                margin-left: -60px;
                background: rgba(29, 106, 154, 0.72);
                color: #fff;
                visibility: hidden;

                /*remove comment if you want a gradual transition between states
                -webkit-transition: visibility opacity 0.2s;
                */
            }

            .imgWrap:hover .imgDescription {
                visibility: visible;
            }
        </style>
        <script type="text/javascript">
            sforce.connection.sessionId = '{!$Api.Session_ID}';
            var acctIds = []; // list of all account SFDC Ids for selected TM
            var allAccounts = []; // list of all accounts for selected TM
            var prdDataArray = []; // list of Watch List Products for selected TM
            //R.M 01/23/2017 US1723:
            var prds_arr = [];
            var currPrdNumber;
            var arrLProd = [];
            var cprValuesList = [];
            var totalAccountWL = 0;
            var error_Text;
            var lastRefreshDate;
            var disableAddRemoveWL = false;
            var defaultErrorMessage = 'An error occurred.  Please try again later or call support at (888) 648-2580.';
            //R.B 04/26/2017:
            var pos_Of_Scroll_jv = 0;
            Visualforce.remoting.timeout = 240000; // Set remote action timeout at page level in milliseconds

            //RK added the previous ROW Id
            var previousRowId;
            // variables used to queue cpr update action
            var cprModified = false;
            var updateCPRPending = false;
            //This function will calls on page load .
            $(document).ready(function() {
                //   $("html").niceScroll();
                var loggedInUserProfileName = "{!$Profile.Name}";

                // Hide "Edit List" hyperlink if logged in user is not a TM, DSM, SC or System Admin
                if (!loggedInUserProfileName.includes('TerritoryManager') &&
                    !loggedInUserProfileName.includes('District_Sales_Manager') &&
                    !loggedInUserProfileName.includes('SalesCoordinator') &&
                    !loggedInUserProfileName.includes('Administrator')
                ) {
                    $('#editListHyperlink').hide();
                    disableAddRemoveWL = true; // this functionality will be implemented later
                }

                   $("#idSelFilterBy").prop("selectedIndex", 4);
                
                AccountListFunc();

            });

            // Build "View Pricing For" picklist and acctIds set for selected TM
            var accountWLCount = [];
            var accountDepartments = [];
            acctIds = [];
            /**
             * Function Name : AccountListFunc
             * Arguments: NA
             * Description: This Function is used to show list of Accounts names in select customer drop down.
             */
            function AccountListFunc() {
                accountWLCount = [];
                accountDepartments = [];
                var headerErrorSet = new Set();
                var watchList = document.getElementById("mntWatchList");
                var tmid = "{!territoryMnId}";
debugger;
                //  Call method to get list of accounts
                VFC_PricingEnquiry.accountList(tmid, function(result, event) {
                    if (event.status) {
                        var j;
                        for (j = watchList.options.length - 1; j >= 0; j--) {
                            watchList.remove(j);
                        }

                        // add WATCHLIST value first in the "View Pricing For" dropdown
                        var vOption = document.createElement("option");
                        vOption.setAttribute("value", "WATCHLISTVALUE");
                        var vOptionName = document.createTextNode('WATCHLIST');
                        vOption.appendChild(vOptionName);
                        vOption.setAttribute("style", "margin-left:-6%;border-bottom:2px solid #000");
                        vOption.setAttribute("class", "whiteBck font13N");
                        watchList.appendChild(vOption);
                        if (result.length > 0) {
                            allAccounts = result;

                            for (var i = 0; i < result.length; i++) {
                                acctIds.push(result[i].Id);
                                //add header error message if it exists on account
                                if (result[i].Watch_List_Error_Message__c) {
                                    var errorCode = result[i].Watch_List_Error_Code__c;

                                    if (errorCode == '98') {
                                        headerErrorSet.add('Product inquires were processed with errors on some products. Refer to individual products for details.');
                                    } else if (errorCode == '97') {
                                        headerErrorSet.add(defaultErrorMessage + ' ' + result[i].Watch_List_Error_Message__c);
                                    } else { // errorCode equals 96, 97 or other
                                        headerErrorSet.add(defaultErrorMessage);
                                    }
                                }

                                var account = result[i];
                                var option = document.createElement("option");
                                var custId = result[i].Id;
                                var watchlistcount = result[i].Watchlist_Records_Count__c;
                                accountWLCount[result[i].Id] = result[i].Watchlist_Records_Count__c;
                                accountDepartments[result[i].Id] = result[i].Departments__r;

                                var custName1, custName2;

                                totalAccountWL += result[i].Watchlist_Records_Count__c;

                                var tanAccName = result[i].Tandem_Account_Name__c;
                                if (tanAccName == undefined || tanAccName == '' || !tanAccName) {
                                    custName1 = '(' + result[i].Tandem_Account_Number__c + ')';
                                    custName2 = '' + watchlistcount + '/25';
                                } else {
                                    custName1 = result[i].Tandem_Account_Name__c + ' ' + '(' + result[i].Tandem_Account_Number__c + ')';
                                    custName2 = '' + watchlistcount + '/25';
                                }

                                //Logic to display watchlist counter per account record
                                option.setAttribute("value", custId);
                                var optionName1 = document.createTextNode(DecodeEntitiesFunc(custName1));
                                var optionName2 = document.createTextNode(custName2);

                                var node1 = document.createElement("span");
                                var node2 = document.createElement("span");
                                node2.id = result[i].Id + 'wlCount';

                                node1.appendChild(optionName1);
                                node2.appendChild(optionName2);

                                //node1.className = "fl"; // first value //commented for SSDR23-1584
                                
                                /** Added below code for Story SSDR23-1584 START **/
                                if(result[i].Customer_Ecom__c >= 50){
                                    var imgNode = document.createElement("img");
                                    imgNode.setAttribute("height", "15");
                                    imgNode.setAttribute("width", "15");
                                    imgNode.setAttribute("src", "{!URLFOR($Resource.PricingUI, '/PricingUI/icons/shoppingcart-18.png')}");
                                    imgNode.setAttribute("style", "margin-right:5px;margin-left:5px");
                                    
                                    option.appendChild(imgNode);
                                }
                                /** SSDR23-1584 END **/

                                if (watchlistcount >= 25) {
                                    node2.className = "clsSpan"; // seconf value
                                } else {
                                    node2.className = "fr"; // seconf value
                                }

                                option.appendChild(node1);
                                option.appendChild(node2);

                                if(result[i].Customer_Ecom__c >= 50) // Added for SSDR23-1584
                                    option.setAttribute("style", "margin-left:-11%;");
                                else
                                    option.setAttribute("style", "margin-left:-6%;");
                                    
                                option.setAttribute("class", "whiteBck font13N");

                                watchList.appendChild(option);

                                // logic to display Last Refresh Date/Time
                                if (result[i].Watch_List_Last_Refresh_Date_Time__c != undefined) {
                                    // Get last refresh date
                                    var date;
                                    var lastRefreshDateStr;

                                    date = new Date(result[i].Watch_List_Last_Refresh_Date_Time__c);
                                    if (lastRefreshDate == undefined) {
                                        lastRefreshDate = date;
                                    } else if (lastRefreshDate < date) { // set lastRefreshDate to the most recent refresh date/time
                                        lastRefreshDate = date;
                                    }

                                    lastRefreshDateStr = lastRefreshDate.toLocaleDateString() + ' ' + lastRefreshDate.toLocaleTimeString();
                                    document.getElementById("lastrfresh").innerHTML = " (Last refresh: " + lastRefreshDateStr + ")";
                                }
                            }

                            FilterSortGroupByWatchListFunc();
                        } else // If no customers are available for the TM...
                        { // show only "WATCHLIST" in "View Pricing For" dropdown field
                            var vWatchList = document.getElementById("mntWatchList");
                            var vOption = document.createElement("option");
                            vOption.setAttribute("value", "WATCHLISTVALUE");
                            var vOptionName = document.createTextNode('WATCHLIST');
                            vOption.appendChild(vOptionName);
                            vOption.setAttribute("style", "margin-left:-6%;");
                            vOption.setAttribute("class", "whiteBck font13N");
                            vWatchList.appendChild(vOption);
                            $("#idDivNoPrds").show();
                        }

                        $('.selectpicker').selectpicker('refresh');

                    } else { // response failed
                        //$("#idDivNoPrds").show();
                        displayHeaderErrorMessage(defaultErrorMessage, false);
                    }

                    // display header error messages for each account if it exists.
                    var append = false;

                    headerErrorSet.forEach(function(value) {
                        displayHeaderErrorMessage(value, append);
                        append = true;
                    });
                });
                //Nov19 - Vyas - Added below line
                cmFun();
            }
            
            //Nov19 - Vyas - STARTS
            function cmFun() {
                var accountId = document.getElementById("mntWatchList").value;
                alert('acc id test: '+accountId);
                var sellerCbAdoption = 0; //Seller_CB_Adoption_QTD__c
                var linesNeededToGive = 0; //Lines_Needed_to_Give__c
                CustomerMetricDataHandler.getdata(function(result,event){
                    alert('acc id: '+result.Seller_CB_Adoption_QTD__c);
                    if(result !=null)                        
                    {
                        if(result.Seller_CB_Adoption_QTD__c != null){
                            sellerCbAdoption = result.Seller_CB_Adoption_QTD__c;
                        }
                        if(result.Lines_Needed_to_Give__c !=null){
                            linesNeededToGive = result.Lines_Needed_to_Give__c;
                        }
                        document.getElementById("sellerCbAdoption").innerHTML = "" + sellerCbAdoption + "%";
                        document.getElementById("linesNeededToGive").innerHTML = "" + linesNeededToGive + "";
                    }
                });
            }
            //Nov19 - Vyas - ENDS
            
            var selectedItemId;
            /**
             * Function Name : onCustomerChange
             * Arguments: NA
             * Description: This Function is called when a Customer is changed.
             */
            function onCustomerChange() {
                var selectedItemId = document.getElementById("mntWatchList").value;
                if ("WATCHLISTVALUE" == selectedItemId) {
                    var departmentlist = document.getElementById("mntDptList");
                    for (var j = departmentlist.options.length; j >= 0; j--) {
                        departmentlist.remove(j - 1);
                    }
                    document.getElementById("mntDptList").disabled = true;
                    document.getElementById("btnGo").disabled = false;
                } else {
                    DepartmentListFunc();
                }
            }
            /**
             * Function Name : DepartmentListFunc
             * Arguments: NA
             * Description: This Function is used to display department names in Department drop down.
             */
            function DepartmentListFunc() {
                var selectedCustomerId = document.getElementById("mntWatchList").value;
                var departmentlist = document.getElementById("mntDptList");
                var custDepartments = accountDepartments[selectedCustomerId];

                for (var j = departmentlist.options.length - 1; j >= 0; j--) {
                    departmentlist.remove(j);
                }

                if (custDepartments != undefined) {

                    // console.log('custDepartments[0]: '+custDepartments[0].Department_Number__c);
                    custDepartmentsLength = custDepartments.length;

                    if (custDepartmentsLength > 0) {
                        document.getElementById("btnGo").disabled = true;
                        document.getElementById("mntDptList").disabled = false;

                        for (var i = 0; i < custDepartmentsLength; i++) {
                            var dept_name;
                            if (custDepartments[i].Department_Number__c == undefined || custDepartments[i].Department_Number__c == '' || !custDepartments[i].Department_Number__c) {
                                dept_name = custDepartments[i].Name + ' ()';
                            } else {
                                dept_name = custDepartments[i].Name + ' (' + custDepartments[i].Department_Number__c + ')';
                            }
                            var optionDept = document.createElement("option");
                            optionDept.setAttribute("value", custDepartments[i].Id);
                            var optionName = document.createTextNode(DecodeEntitiesFunc(dept_name));

                            optionDept.appendChild(optionName);
                            optionDept.setAttribute("style", "margin-left:-7%;");
                            optionDept.setAttribute("class", "font13N whiteBck");

                            departmentlist.add(optionDept);
                        }
                    } else { // no departments for selected customer found
                        document.getElementById("btnGo").disabled = false;
                        document.getElementById("mntDptList").disabled = true;
                    }
                } else {
                    document.getElementById("btnGo").disabled = false;
                    document.getElementById("mntDptList").disabled = true;
                }
                $('.selectpicker').selectpicker('refresh');
            }

            var vSetColorToFirstRowTable; //this variable is used to assign backgroundcolor to FirstRow of Table and Maping to right side section.
            var searchWatchList;
            var groupByWatchList;
            var sortByWatchList;
            var filterByWatchList;

            /*Code added by Deepanshu for SSCD-296, implementing auto scrolling, starts*/
            var incrementListNum = 50; // number of how many products to display on the screen at a time
            var incrementMultiplier = 0;
            var indexOfPrds_jv = 0; // the index of the products displayed
            var NoOfPrdsDisplay_jv = 0; // total number of products returned in filter/sort/group
            var lastGroupByName='FIRSTHEADER';
            var currGroupByName='';
            var accountsWithWLProducts = [];

            /**
             * Function Name : FilterSortGroupByWatchListFunc
             * Arguments: NA
             * Description: This function to filter, sort, group the list of watchlist records. Then display the returned list.
             */
            function FilterSortGroupByWatchListFunc() {

                vSetColorToFirstRowTable = 0;
                searchWatchList = encodeURIComponent(document.getElementById("idSearch").value.trim()); // SSCD-97
                
                groupByWatchList = document.getElementById("idSelGrouptBy").value;
                sortByWatchList = document.getElementById("idSelSortBy").value;
                filterByWatchList = document.getElementById("idSelFilterBy").value;

                if (totalAccountWL > 0) {
                    CleanUpTable(); // reset tables
                    document.getElementById('load').style.visibility = "visible"; // show loading screen

                    VFC_PricingEnquiry.getFilterSortGroupByWatchList(acctIds, filterByWatchList, sortByWatchList, groupByWatchList, searchWatchList, function(result, event) {
                        if (event.status) {
                            prdDataArray = []; // reset prdDataArray
                            //R.M 01/23/2017 US1723:
                            prds_arr = []; //reset  prds_arr
                            currPrdId = '';

                            //console.log('-------result------------');
                            //console.log(result);

                            if (result.length > 0) {
                                $("#iddDiv").show();
                                $("#idPricingSectionRight").show();
                                $("#idPricingFilterSection").show();
                                $("#idDivUpdateRefresh").show();
                                $("#idPricingFilterSection1").show(); //SSCD-97
                                $("#idPricingFilterSection2").show(); //SSCD-97


                                //set All Data
                                prdDataArray = result;
                                NoOfPrdsDisplay_jv = result.length;
                                indexOfPrds_jv = 0;
                                incrementMultiplier = 0;
                                accountsWithWLProducts = [];

                                showMoreProducts_JFunc();

                                //R.B 04/26/2017: Remove Product Scroll position
                                var heightOfDiv_jv = $('#iddDiv')[0].scrollHeight;
                                //console.log('heightOfDiv_jv:::::pos_Of_Scroll_jv:::::'+heightOfDiv_jv+'::::'+pos_Of_Scroll_jv);
                                if (heightOfDiv_jv >= pos_Of_Scroll_jv && pos_Of_Scroll_jv != 0)
                                    $('#iddDiv').scrollTop(pos_Of_Scroll_jv);
                                else
                                    $('#iddDiv').scrollTop(0);
                                pos_Of_Scroll_jv = 0;
                            } // end of if(result.length>0)
                            else { // No products returned from filter/sort/group
                                $("#idPricingSectionRight").hide();
                                $("#iddDiv").show();
                                $("#idPricingFilterSection").show();
                                $("#idDivUpdateRefresh").show();
                                $("#idPricingFilterSection1").show(); //SSCD-97
                                $("#idPricingFilterSection2").show(); //SSCD-97

                                var table = document.getElementById('tblProducts');
                                var rowCount = table.rows.length;
                                var row = table.insertRow(rowCount);
                                row.id = "idRowHeader";
                                var arrHeadrName = ["", "CUSTOMER", "PRODUCT", "$ CURRENT/</br>$ LAST WEEK", "PRICING", "CPR", "GPD/</br>GP%"];
                                for (var n = 0; n < arrHeadrName.length; n++) {
                                    var headerCell = document.createElement("TH");
                                    headerCell.setAttribute('id', 'idHeaderRowGrpFilter');
                                    headerCell.innerHTML = arrHeadrName[n];
                                    row.appendChild(headerCell);
                                }
                                var rowCount1 = rowCount + 1;
                                var row1 = table.insertRow((rowCount1));
                                row1.id = "noProductsId";
                                var cell = row1.insertCell(0);
                                document.getElementById('tblProducts').rows[rowCount1].cells[0].innerHTML = "There are no products in the Watch List.";
                                document.getElementById('tblProducts').rows[rowCount1].cells[0].colSpan = 7;
                                document.getElementById('tblProducts').rows[rowCount1].cells[0].style = "text-align:center;color:red;";
                            }

                        } else { // response failed
                            displayHeaderErrorMessage(defaultErrorMessage, false);
                        }


                         //------------------------------------------------------------------------

                        document.getElementById('load').style.visibility = "hidden";
                    });
                } else { // TM has no watchlist records
                    $("#idDivNoPrds").show();
                }
                lastGroupByName='FIRSTHEADER';
                currGroupByName='';
            }



             /**
              * Function Name : showMoreProducts_JFunc
              * Arguments: NA
              * Description: This function is used to implement auto scrolling
              */
             function showMoreProducts_JFunc() {
                 console.log('showMoreProducts_JFunc');
                 console.log('vSetColorToFirstRowTable:' + vSetColorToFirstRowTable);
                 console.log('indexOfPrds_jv:' + indexOfPrds_jv);
                 console.log('NoOfPrdsDisplay_jv:' + NoOfPrdsDisplay_jv);
                 console.log('incrementMultiplier:' + incrementMultiplier);

                 if (indexOfPrds_jv < NoOfPrdsDisplay_jv) { // display next set of products after user scrolls to the bottom of the list
                     incrementMultiplier++;
                     //------------------------------------------------------------------------
                     if (groupByWatchList == 'No Grouping') {
                         if (indexOfPrds_jv == 0) {
                             var table = document.getElementById('tblProducts');
                             var rowCount = table.rows.length;
                             var arrHeadrName = ["", "CUSTOMER", "PRODUCT", "$ CURRENT/</br>$ LAST WEEK", "PRICING", "CPR", "GPD/</br>GP%"];
                             var row = table.insertRow((rowCount));
                             row.id = "noPrdsId";
                             for (var i = 0; i < arrHeadrName.length; i++) {
                                 var headerCell = document.createElement("TH");
                                 headerCell.setAttribute('id', 'idHeaderRow');
                                 headerCell.innerHTML = arrHeadrName[i];
                                 row.appendChild(headerCell);
                             }
                         }
                         for (var i = indexOfPrds_jv; i < NoOfPrdsDisplay_jv && indexOfPrds_jv < (incrementListNum * incrementMultiplier); i++) {
                             indexOfPrds_jv++;
                             prds_arr['ROW' + prdDataArray[i].Id] = prdDataArray[i];
                             GenerateTableRow(prdDataArray[i]);

                             if (vSetColorToFirstRowTable == 0) {
                                 //document.getElementById('ROW'+prdDataArray[i].Id).className="even";
                                 document.getElementById('idCPR' + prdDataArray[i].Id).focus();
                                 currPrdId = prdDataArray[i].Id; // used for set buttons
                                 previousRowId = 'ROW' + prdDataArray[i].Id;
                                 document.getElementById(previousRowId).className = "even";
                                 rightSideMapping(prdDataArray[i]);
                                 //R.M 01/25/2017 US1723:
                                 //changeColor('ROW' + prdDataArray[i].Id); // SSDR23-1884
                                 vSetColorToFirstRowTable++;
                             }
                         }
                     } else { //GroupBy Filter-Other than "No Grouping".

                         for (var i = indexOfPrds_jv; i < NoOfPrdsDisplay_jv && indexOfPrds_jv < (incrementListNum * incrementMultiplier); i++) {
                             if (groupByWatchList == 'WWP (Asc)') {
                                 currGroupByName = 'WWP' + ' ' + prdDataArray[i].WWP__c;
                             } else if (groupByWatchList == 'PIM Class') {
                                 currGroupByName = 'PIM' + ' ' + prdDataArray[i].PIM_Class__c;
                                 currGroupByName = DecodeEntitiesFunc(DecodeEntitiesFunc(currGroupByName));
                             }
                             if (groupByWatchList == 'CBA End Date (Asc)') {
                                 currGroupByName = 'CBA End Date' + ' ' + DateConverterFormat(prdDataArray[i].CBA_End_Date__c);
                             } else if (groupByWatchList == 'Customer') {
                                 if (
                                     prdDataArray[i].Account__r != undefined && prdDataArray[i].Account__r != null &&
                                     prdDataArray[i].Account__r.Tandem_Account_Number__c != undefined && prdDataArray[i].Account__r.Tandem_Account_Number__c != null &&
                                     prdDataArray[i].Account__r.Tandem_Account_Name__c != undefined && prdDataArray[i].Account__r.Tandem_Account_Name__c != null
                                 ) {
                                     currGroupByName = prdDataArray[i].Account__r.Tandem_Account_Name__c + '(' + prdDataArray[i].Account__r.Tandem_Account_Number__c + ')';
                                     accountsWithWLProducts.push(prdDataArray[i].Account__r.Tandem_Account_Number__c);
                                 } else if (
                                     prdDataArray[i].Account__r != undefined && prdDataArray[i].Account__r != null &&
                                     prdDataArray[i].Account__r.Tandem_Account_Number__c != undefined && prdDataArray[i].Account__r.Tandem_Account_Number__c != null
                                 ) {
                                     currGroupByName = '(' + prdDataArray[i].Account__r.Tandem_Account_Number__c + ')';
                                     accountsWithWLProducts.push(prdDataArray[i].Account__r.Tandem_Account_Number__c);
                                 } else {
                                     currGroupByName = 'Unkwnown';
                                 }
                                 currGroupByName = DecodeEntitiesFunc(DecodeEntitiesFunc(currGroupByName));
                             }

                             if (lastGroupByName != currGroupByName) {
                                 var table = document.getElementById('tblProducts');
                                 var rowCount = table.rows.length;
                                 var row = table.insertRow((rowCount));
                                 row.id = "noPrdsIdGrpFilter";
                                 var cell = row.insertCell(0);
                                 document.getElementById('tblProducts').rows[rowCount].cells[0].innerHTML = '<div class="bootstrap col-md-8 col-sm-8 grpHeaderNames" ><div id="divPosCust">' + currGroupByName + '</div></div>';
                                 document.getElementById('tblProducts').rows[rowCount].cells[0].colSpan = 7
                                 var arrHeadrName = ["", "CUSTOMER", "PRODUCT", "$ CURRENT/</br>$ LAST WEEK", "PRICING", "CPR", "GPD/</br>GP%"];
                                 var roww = table.insertRow((rowCount + 1));
                                 roww.id = "idRowHeader";
                                 for (var n = 0; n < arrHeadrName.length; n++) {
                                     var headerCell = document.createElement("TH");
                                     headerCell.setAttribute('id', 'idHeaderRowGrpFilter');
                                     headerCell.innerHTML = arrHeadrName[n];
                                     roww.appendChild(headerCell);
                                 }

                             }
                             lastGroupByName = currGroupByName

                             indexOfPrds_jv++;
                             prds_arr['ROW' + prdDataArray[i].Id] = prdDataArray[i];
                             GenerateTableRow(prdDataArray[i]);
                             //console.log(prdDataArray[i]);

                             if (vSetColorToFirstRowTable == 0) {
                                 document.getElementById('idCPR' + prdDataArray[i].Id).focus();
                                 currPrdId = prdDataArray[i].Id; // used for set buttons
                                 previousRowId = 'ROW' + prdDataArray[i].Id;
                                 document.getElementById(previousRowId).className = "even";
                                 rightSideMapping(prdDataArray[i]);
                                 //R.M 01/25/2017 US1723:
                                 //changeColor('ROW' + prdDataArray[i].Id); // SSDR23-1884
                                 vSetColorToFirstRowTable++;
                             }

                         }

                         if (groupByWatchList == 'Customer'
                            &&  ( NoOfPrdsDisplay_jv==0 ||  indexOfPrds_jv == NoOfPrdsDisplay_jv )
                           ) {
                             for (var i = 0; i < allAccounts.length; i++) {
                                 if ( accountsWithWLProducts.indexOf( allAccounts[i].Tandem_Account_Number__c) == -1)   {
                                     var table = document.getElementById('tblProducts');
                                     var rowCount = table.rows.length;
                                     var row = table.insertRow(rowCount);
                                     row.id = "noPrdsId";
                                     var cell = row.insertCell(0);
                                     var custName = '(' + allAccounts[i].Tandem_Account_Number__c + ')';
                                     if (allAccounts[i].Tandem_Account_Name__c != undefined || allAccounts[i].Tandem_Account_Name__c != null ||  allAccounts[i].Tandem_Account_Name__c) {
                                          custName = allAccounts[i].Tandem_Account_Name__c + '(' + allAccounts[i].Tandem_Account_Number__c + ')';
                                     }
                                     document.getElementById('tblProducts').rows[rowCount].cells[0].innerHTML = '<div class="bootstrap col-md-8 col-sm-8" style="margin-top: 1%;width:60%;background-color:transparent;padding-left:0;"><div id="divPosCust">' + custName + '</div></div>';
                                     document.getElementById('tblProducts').rows[rowCount].cells[0].colSpan = 7
                                     var arrHeadrName = ["", "CUSTOMER", "PRODUCT", "$ CURRENT/</br>$ LAST WEEK", "PRICING", "CPR", "GPD/</br>GP%"];
                                     var row1 = table.insertRow((rowCount + 1));
                                     row1.id = "idRowHeader";
                                     for (var n = 0; n < arrHeadrName.length; n++) {
                                         var headerCell = document.createElement("TH");
                                         headerCell.setAttribute('id', 'idHeaderRowGrpFilter');
                                         headerCell.innerHTML = arrHeadrName[n];
                                         row1.appendChild(headerCell);
                                     }
                                     var rowCount2 = rowCount + 2;
                                     var row2 = table.insertRow((rowCount + 2));
                                     row2.id = "noProductsId";
                                     var cell = row2.insertCell(0);
                                     document.getElementById('tblProducts').rows[rowCount2].cells[0].innerHTML = "There are no products in the Watch List.";
                                     document.getElementById('tblProducts').rows[rowCount2].cells[0].colSpan = 7;
                                     document.getElementById('tblProducts').rows[rowCount2].cells[0].className = "tblNoPrdtsErr";
                                 }
                             }
                         }

                     } // end of else - GroupBy Filter-Other than "No Grouping".

                 }
             }



            // R.M 01/19/2017 US1723
            /**
             * Name:PrdsReviewedUnreviewed_Func
             * Arguments:None
             * Description:This function is used to describe whether products are reviewed or not.
             */
            var reviewed_Prds_list_arr;

            function prdsReviewedUnreviewed_Func(prd_rowId) {
                  console.log('PR-REV'+prds_arr[prd_rowId].Product_Number__c +prds_arr[prd_rowId].Watchlist_Product_Id__c );
                VFC_PricingEnquiry.reviewedUnreviewdPrdFieldValue(prds_arr[prd_rowId].Product_Number__c, prds_arr[prd_rowId].Watchlist_Product_Id__c, function(result, event) {
                    //  console.log(event.status);
                    if (event.status) {

                        prds_arr[prd_rowId].Reviewed_Product__c = true;
                    }

                });
                /*  var arrLength_v=prdDataArray.length;
                if(arrLength_v>0)
                {
                    for(var i=0;i<arrLength_v;i++)
                    {
                //    console.log(prds_arr[prd_rowId].Product_Number__c+':::::'+prds_arr[prd_rowId].Reviewed_Product__c);
                    if(prds_arr[prd_rowId].Id.includes(prd_rowId.substring(3)) && !prds_arr[prd_rowId].Reviewed_Product__c )
                        {
                        var tem_Watch_List=new sforce.SObject('Watch_List__c');
                        tem_Watch_List.Id=prds_arr[prd_rowId].Id;
                        tem_Watch_List.Reviewed_Product__c=true
                        var result_v=sforce.connection.update([tem_Watch_List])
                        if(result_v[0].success)
                        {
                        console.log('Product is  updated..');
                        prds_arr[prd_rowId].Reviewed_Product__c=true
                        }
                        else
                        {
                        console.log('Product is not updated..');
                        }
                      }
                    }
                }*/


            }
            
            /**
             * Name : captureWeeklyViewDate_Fun
             * Arguments : Id of WL object
             * Description : This function is used to check if a read/unread record is created for logged in user with current week capture, if not, creates one. Story SSDR23-1581
             */

            function captureWeeklyViewDate_Fun(prd_rowId) {
                
                VFC_PricingEnquiry.captureWeeklyViewDate(prds_arr[prd_rowId].Product_Number__c, prds_arr[prd_rowId].Watchlist_Product_Id__c, function(result, event) {
                    
                    if (event.status) {

                        console.log('captureWeeklyViewDate_Fun done');
                    }

                });
            }


            var arrayLast4buyTrans;
            /**
             * Function Name : rightSideMapping
             * Arguments: PRDdata
             * Description: This Function is used to copy of selected Product to right side table.
             */
            function rightSideMapping(prdData) {
                console.log('------rightSideMapping-------');
                console.log(prdData);

                arrayLast4buyTrans = [];
                CleanUpLastFourBuyTable();
                var strImg = DecodeEntitiesFunc((prdData.Product_Image__c));

                if (strImg.match(/\.(jpeg|jpg|gif|png)/) != null) {
                    var strParts = strImg.split('border="0"');
                    strImg = strParts[0] + 'width="100%" height="100%" border="0"' + strParts[1];
                    document.getElementById('imageLinkId').innerHTML = strImg;
                } else {
                    document.getElementById('imageLinkId').innerHTML = "<img src='{!$Resource.NoProductImage}' width='100%' height='100%' border='0' alt='No Image' />";
                }

                //Header
                document.getElementById("divTanName").innerHTML = prdData.Account__r.Tandem_Account_Name__c;
                document.getElementById("divProdDesc").innerHTML = DecodeEntitiesFunc(DecodeEntitiesFunc(prdData.Product_Description__c));
                document.getElementById("divPrdNumb").innerHTML = '#' + prdData.Product_Number__c;
                document.getElementById("divBrand").innerHTML = DecodeEntitiesFunc(DecodeEntitiesFunc(prdData.Brand__c));
                if (prdData.Pack_Size__c == undefined || prdData.Pack_Size__c == null || !prdData.Pack_Size__c) {
                    document.getElementById("divPackSiz").innerHTML = '';
                } else {
                    document.getElementById("divPackSiz").innerHTML = prdData.Pack_Size__c;
                }

                // logic to determine if min, tar, max is used instead of floor, sell list - shifted above [Deepanshu Soni: SSCD-207]
                var displayMTX = false;
                if (prdData.CookBook_Product_Indicator__c && (prdData.CookBook_Division_Indicator__c || prdData.CCP_Plus_Division_Indicator__c)) {
                    displayMTX = true;
                }
                /*Code added to display a green check, starts [Deepanshu Soni:SSCD-207]*/
                let isGreenCheck = false;
                if(prdData.Locally_Priced_Indicator__c!=undefined && prdData.Locally_Priced_Indicator__c == false){
                    if (!displayMTX) {
                        if (
                            prdData.Current_Week_Price__c != undefined &&
                            prdData.Current_Week_Price__c != null &&
                            prdData.Current_Week_Price__c != 0 &&
                            prdData.Sell__c != undefined &&
                            prdData.Sell__c != null &&
                            prdData.List__c != undefined &&
                            prdData.List__c != null &&
                            TwoDecimalFunc(prdData.Current_Week_Price__c)*10 >= TwoDecimalFunc(prdData.Sell__c)*10 
                        ) {
                            isGreenCheck = true;
                        }
                    } else {
                        if (
                            prdData.Current_Week_Price__c != undefined &&
                            prdData.Current_Week_Price__c != null &&
                            prdData.Current_Week_Price__c != 0 &&
                            prdData.Target__c != undefined &&
                            prdData.Target__c != null &&
                            prdData.MAX__c != undefined &&
                            prdData.MAX__c != null &&
                            TwoDecimalFunc(prdData.Current_Week_Price__c)*10 >= TwoDecimalFunc(prdData.Target__c)*10 
                        ) {
                            isGreenCheck = true;
                        }
                    }
                }
                /*Code added to display a green check, ends [Deepanshu Soni:SSCD-207]*/

                // product status icon indicator logic
                document.getElementById("idTick").innerHTML = ''; //added by Deepanshu for SSCD-207 - Greentick //commented until further clarification
                document.getElementById("idSom").innerHTML = '';
                document.getElementById("idDWO").innerHTML = '';
                document.getElementById("idDISC").innerHTML = '';
                document.getElementById("idBREAKABLE").innerHTML = '';
                document.getElementById("idJIT").innerHTML = '';
                document.getElementById("idVS").innerHTML = '';
                document.getElementById('idScoop').innerHTML = "";
                document.getElementById('idPriceLocallyIndicator').innerHTML = "";
                if (prdData.Special_Order_Merchandise__c == true) {
                    //  document.getElementById("idSom").innerHTML = "<img src='{!$Resource.SpecialOrder}'  width='6%' height='100%' border='0' alt='No Image' />";
                    document.getElementById("idSom").innerHTML = "<span class ='imgWrap'><img src='{!URLFOR($Resource.PricingUI, '/PricingUI/icons/special-order-24.png')}'  width='24' height='24' border='0' alt='No Image'/> <span class='imgDescription'>Special Order</span></span>";

                }
                if (prdData.Discontinued_When_Out__c == true) {
                    //  document.getElementById("idDWO").innerHTML = "<img src='{!$Resource.DWO}' width='6%' height='100%' border='0' alt='No Image' />";
                    document.getElementById("idDWO").innerHTML = "<span class ='imgWrap'><img src='{!URLFOR($Resource.PricingUI, '/PricingUI/icons/dwo-24.png')}' width='24' height='24' border='0' alt='No Image' /><span class='imgDescription'>Discontinued When Out</span></span>";
                }
                if (prdData.Discontinued__c == true) {
                    //  document.getElementById("idDISC").innerHTML = "<img src='{!$Resource.Discontinued}' width='6%' height='100%' border='0' alt='No Image' />";
                    document.getElementById("idDISC").innerHTML = "<span class ='imgWrap'><img src='{!URLFOR($Resource.PricingUI, '/PricingUI/icons/discontinued-24.png')}' width='24' height='24' border='0' alt='No Image' /><span class='imgDescription'>Discontinued</span></span>";
                }
                //  }
                if (prdData.Breakable__c == true) {
                    // document.getElementById("idBREAKABLE").innerHTML = "<img src='{!$Resource.Breakable}' width='6%' height='100%' border='0' alt='No Image' />";
                    document.getElementById("idBREAKABLE").innerHTML = "<span class ='imgWrap'><img src='{!URLFOR($Resource.PricingUI, '/PricingUI/icons/breakable-24.png')}' width='24' height='24' border='0' alt='No Image' /><span class='imgDescription'>Breakable</span></span>";
                }
                if (prdData.Just_In_Time__c == true) {
                    //   document.getElementById("idJIT").innerHTML = "<img src='{!$Resource.JustInTime}' width='6%' height='100%' border='0' alt='No Image' />";
                    document.getElementById("idJIT").innerHTML = "<span class ='imgWrap'><img src='{!URLFOR($Resource.PricingUI, '/PricingUI/icons/just-in-time-24.png')}' width='24' height='24' border='0' alt='No Image' /><span class='imgDescription'>Just In Time</span></span>";
                }

                /*Code added to display a green check, starts [Deepanshu Soni:SSCD-207]*/ //commented until further clarification
                if(isGreenCheck)
                {
                   document.getElementById("idTick").innerHTML = "<span class ='imgWrap'><img src='{!URLFOR($Resource.greenCheckmark)}' width='24' height='24' border='0' alt='No Image' /><span class='imgDescription'>Product priced as Target or above</span></span>";
                }
                /*Code added to display a green check, ends [Deepanshu Soni:SSCD-207]*/

                if (prdData.Vendor_Ship__c == true) {
                    //    document.getElementById("idVS").innerHTML = "<img src='{!$Resource.VendorShip}' width='6%' height='100%' border='0' alt='No Image' />";
                    document.getElementById("idVS").innerHTML = "<span class ='imgWrap'><img src='{!URLFOR($Resource.PricingUI, '/PricingUI/icons/vendor-shipped-24.png')}' width='24' height='24' border='0' alt='No Image' /><span class='imgDescription'>Vendor Shipped</span></span>";
                }
                //Locally_Priced_Indicator__c
                if (prdData.Locally_Priced_Indicator__c == true) {
                    // document.getElementById('idPriceLocallyIndicator').innerHTML="<img src='{!URLFOR($Resource.PricingUI, '/PricingUI/icons/locally-priced-32.png')}' width='3%' height='100%' />";
                    document.getElementById('idPriceLocallyIndicator').innerHTML = "<span class ='imgWrap'><img src='{!URLFOR($Resource.PricingUI, '/PricingUI/icons/locally-priced-24.png')}' width='24' height='24' /><span class='imgDescription'>Locally Priced</span></span>";
                }

                if (prdData.SCOOP_Indicator__c == '1' || prdData.SCOOP_Indicator__c == '2') {
                    // document.getElementById('idScoop').innerHTML="<img src='{!$Resource.Scoop}' width='10%' height='100%' border='0' alt='No Image' />";
                    document.getElementById('idScoop').innerHTML = "<span class ='imgWrap'><img src='{!URLFOR($Resource.PricingUI, '/PricingUI/icons/scoop-24.png')}'  width='24' height='24' border='0' alt='No Image' /><span class='imgDescription'>Scoop Product</span></span>";
                }

                // Current Price
                document.getElementById("spCurPrc").innerHTML = '$' + TwoDecimalFunc(prdData.Current_Week_Price__c);

                // Min/Target/Max section
                if (!displayMTX) {
                    document.getElementById("spTarg").innerHTML = '$' + TwoDecimalFunc(prdData.Sell__c);
                    document.getElementById("spMax").innerHTML = '$' + TwoDecimalFunc(prdData.List__c);
                    if (prdData.Floor__c != null || prdData.Floor__c != NaN || prdData.Floor__c != ' ') {
                        document.getElementById("spMin").innerHTML = '$' + TwoDecimalFunc(prdData.Floor__c);
                    } else {
                        document.getElementById("spMin").innerHTML = '$' + 0.00;
                    }
                } else {
                    document.getElementById("spTarg").innerHTML = '$' + TwoDecimalFunc(prdData.Target__c);
                    document.getElementById("spMax").innerHTML = '$' + TwoDecimalFunc(prdData.MAX__c);
                    if (prdData.MIN__c != null || prdData.MIN__c != NaN || prdData.MIN__c != ' ') {
                        document.getElementById("spMin").innerHTML = '$' + TwoDecimalFunc(prdData.MIN__c);
                    } else {
                        document.getElementById("spMin").innerHTML = '$' + 0.00;
                    }
                    //document.getElementById("spMin").innerHTML='$'+TwoDecimalFunc(prdData.MIN__c);
                }


                //product detail section
                if (prdData.COM__c == null) // COM
                {
                    document.getElementById("spCOM").innerHTML = '';
                } else {
                    document.getElementById("spCOM").innerHTML = '$' + TwoDecimalFunc(prdData.COM__c);
                }


                if (prdData.Rationale__c == null || prdData.Rationale__c == undefined) { // Rationale
                    document.getElementById("spRationale").innerHTML = '';
                } else {
                    document.getElementById("spRationale").innerHTML = DecodeEntitiesFunc(DecodeEntitiesFunc(prdData.Rationale__c));
                    //document.getElementById("spRationale").innerHTML= prdData.rationale;
                }

                if (prdData.GPD__c == undefined || prdData.GPD__c == null || !prdData.GPD__c) { // GPD
                    document.getElementById("spGPD").innerHTML = '$' + TwoDecimalFunc(0.00);
                } else {
                    document.getElementById("spGPD").innerHTML = convertToCurrency(prdData.GPD__c);
                    // document.getElementById("spEachPrice").innerHTML='$'+TwoDecimalFunc(prdData.Each_Price__c);
                }
                /*Code added by Deepanshu for SSCD-292, CPR Adjusted Date, starts*/
                if (prdData.CPR_Adjustment_Date__c == undefined || prdData.CPR_Adjustment_Date__c == null || prdData.CPR_Adjustment_Date__c == '') {
                    document.getElementById("cprAdjustedDate").innerHTML = "";
                } else {
                    document.getElementById("cprAdjustedDate").innerHTML = DateConverterFormat(prdData.CPR_Adjustment_Date__c);
                }
                /*Code added by Deepanshu for SSCD-292, CPR Adjusted Date, ends*/
                document.getElementById("spBrkSurchrge").innerHTML = (prdData.Break_Surcharge__c); // Break Surcharge
                if (prdData.Each_Price__c == undefined || prdData.Each_Price__c == null || !prdData.Each_Price__c) { // Each PRice
                    document.getElementById("spEachPrice").innerHTML = '$ 0.00';
                } else {
                    document.getElementById("spEachPrice").innerHTML = '$' + TwoDecimalFunc(prdData.Each_Price__c);
                }

                
                document.getElementById("spLastWkPrice").innerHTML = '$' + TwoDecimalFunc(prdData.Last_Week_Price__c);
                document.getElementById("spLastWkPriceDate").innerHTML = DateConverterFormat(prdData.Last_Wk_s_Price_Date__c);

                if (prdData.CBA_Number__c == undefined || prdData.CBA_Number__c == null || prdData.CBA_Number__c == '') { // CBA Number
                    document.getElementById("spCBANumber").innerHTML = "";
                } else {
                    document.getElementById("spCBANumber").innerHTML = prdData.CBA_Number__c;
                }


                if (prdData.CBA_Amount__c == null || prdData.CBA_Amount__c == '' || prdData.CBA_Amount__c == undefined) { // CBA Amount
                    document.getElementById("spCBAAmount").innerHTML = '';
                } else {
                    document.getElementById("spCBAAmount").innerHTML = convertToCurrency(prdData.CBA_Amount__c);
                }


                if (prdData.CBA_End_Date__c == null || prdData.CBA_End_Date__c == '' || prdData.CBA_End_Date__c == undefined) { // CBA End Date
                    document.getElementById("spCBAEndDate").innerHTML = '';
                } else {
                    document.getElementById("spCBAEndDate").innerHTML = DateConverterFormat(prdData.CBA_End_Date__c);
                }


                if (prdData.Driver_Information__c == null || prdData.Driver_Information__c == '' || prdData.Driver_Information__c == undefined) {


                    document.getElementById("driverInformation").innerHTML = '';
                } else {

                    document.getElementById("driverInformation").innerHTML = prdData.Driver_Information__c;
                }

                if (prdData.Passenger__c != undefined) { // Passenger
                    document.getElementById("passengerIndicator").innerHTML = prdData.Passenger__c;
                } else {
                    document.getElementById("passengerIndicator").innerHTML = ' ';
                }

                // Generate Last 4 Buy Table
                var last4BuyList = prdData.Last_4_Buys__r;
                
                if (last4BuyList != undefined) {
                    for (var i = 0;
                        (i < last4BuyList.length) && (i < 4); i++) {
                        //last4BuyRow(last4BuyList[i]);
                        arrayLast4buyTrans.push(last4BuyList[i]);

                        var last_INV_DATE__c = DateConverterFormat(last4BuyList[i].INV_DATE__c);
                        var last_INVOICE__c = last4BuyList[i].INVOICE__c;
                        var last_MTHD__c;

                        if (last4BuyList[i].MTHD__c == null) {
                            last_MTHD__c = '';
                        } else {
                            /* SV : R 1.6.1 1823- Added Abbreviation for price method. */
                            last_MTHD__c = last4BuyList[i].MTHD__c;
                            if (last_MTHD__c == '1') {
                                last_MTHD__c = 'OVR';
                            } else if (last_MTHD__c == '2') {
                                last_MTHD__c = 'eBKT';
                            } else if (last_MTHD__c == '3') {
                                last_MTHD__c = 'CON';
                            } else if (last_MTHD__c == '4') {
                                last_MTHD__c = 'CPR';
                            } else if (last_MTHD__c == '5') {
                                last_MTHD__c = 'BKT';
                            } else if (last_MTHD__c == '6') {
                                last_MTHD__c = 'LST';
                            } else if (last_MTHD__c == '7') {
                                last_MTHD__c = 'sBKT';
                            } else if (last_MTHD__c == '8') {
                                last_MTHD__c = 'FS';
                            }
                            // else - last_MTHD__c abreviation mapping not defined, display number value as-is

                        }

                        
                        var last_PRICE__c = convertToCurrency(last4BuyList[i].PRICE__c);
                        var last_QTY__c = last4BuyList[i].QTY__c;
                        var last_WWP__c = last4BuyList[i].WWP__c;
                        var last_DEPT__c = last4BuyList[i].DEPT__c;
                        var table = document.getElementById("idLastFourBuys");
                        var row = table.insertRow(-1);
                        for (var j = 0; j < 7; j++) {
                            /* Code changed by Avinash for user story SSDR23-1579 START */
                            var cell = row.insertCell(-1);
                            if (j == 0) {
                                cell.innerHTML = '<div class="last4buyvalues" style="text-align:center;" id="dCell0">' + last_INVOICE__c + '</div>';
                            } else if (j == 1) {
                                cell.innerHTML = '<div class="last4buyvalues" style="text-align:center;" id="dCell1">' + last_INV_DATE__c + '</div>';
                            } else if (j == 2) {
                                cell.innerHTML = '<div class="last4buyvalues" style="text-align:center;" id="dCell2">' + last_WWP__c + '</div>';
                            } else if (j == 3) {
                                cell.innerHTML = '<div class="last4buyvalues" style="text-align:center;" id="dCell3">' + last_PRICE__c + '</div>';
                            } else if (j == 4) {
                                cell.innerHTML = '<div class="last4buyvalues" style="text-align:center;" id="dCell4">' + last_QTY__c + '</div>';
                            } else if (j == 5) {
                                cell.innerHTML = '<div class="last4buyvalues" style="text-align:center;" id="dCell5">' + last_MTHD__c + '</div>';
                            } else if (j == 6) {
                                if (last_DEPT__c == undefined) {
                                    last_DEPT__c = '';
                                }
                                cell.innerHTML = '<div class="" style="text-align:center;margin-top:14px;width:110%" id="dCell6">' + last_DEPT__c + '</div>';
                            }
                            /* Code changed by Avinash for user story SSDR23-1579 END */
                        }
                    }
                }
                
                /*Added by ADUA for SSCD-473 -starts*/
                document.getElementById("caseQtyAvl").innerHTML = '';
                document.getElementById("eachQtyAvl").innerHTML = ''; 
                var errStringProductWS = 'Quantity values are not available for product '+ prdData.Product_Number__c;
                VFC_PricingEnquiry.GetProductInventoryDetail(prdData.Account__r.Division_Number__c, prdData.Product_Number__c, function(result, event) {
                    if (event.status) {
                        if(result != undefined){
                            if(!result.hasBusinessError){
                                console.log('####CaseQtyAvl : '+result.allCWSProducts[0].caseQtyAvl+' for ProdNum: '+prdData.Product_Number__c);
                                document.getElementById("caseQtyAvl").innerHTML = result.allCWSProducts[0].caseQtyAvl;
                                document.getElementById("eachQtyAvl").innerHTML = result.allCWSProducts[0].eachQtyAvl;  
                            }
                            else{ //response has error
                                //displayHeaderErrorMessage(result.businessErrorMessages[0], true);
                                document.getElementById("caseQtyAvl").innerHTML = 'N/A';
                                document.getElementById("eachQtyAvl").innerHTML = 'N/A';  
                            }
                        }
                        else{ //response is null                         
                            //displayHeaderErrorMessage(errStringProductWS, true);
                            document.getElementById("caseQtyAvl").innerHTML = 'N/A';
                            document.getElementById("eachQtyAvl").innerHTML = 'N/A';  
                        }
                    }
                    else{ //response failed
                        console.log('####Response failed for ProdNum: '+prdData.Product_Number__c);
                        //displayHeaderErrorMessage(errStringProductWS, true);
                        document.getElementById("caseQtyAvl").innerHTML = 'N/A';
                        document.getElementById("eachQtyAvl").innerHTML = 'N/A';  
                    }
                });
                /*Added by ADUA for SSCD-473 -ends*/
                
                google.charts.load('current', {
                    'packages': ['corechart']
                });
                google.charts.setOnLoadCallback(drawChart);


            }



            var chart;
            var vDataTable;
            /**
             * Function Name : drawChart
             * Arguments: NA
             * Description: This Function is used to create chart in right side table in the section "Last 4 buys Graph".
             */
            function drawChart() {
                var dataArray = new Array();

                if (arrayLast4buyTrans == null || arrayLast4buyTrans == undefined || !arrayLast4buyTrans) {
                    $("#chart_div").text("No Last 4 Buy transactions are available for this product.").css("color", "red");
                } else {
                    for (var i = 0; i < arrayLast4buyTrans.length; i++) {
                        var vLastPrice = arrayLast4buyTrans[i].PRICE__c;
                        var vLastInvoiceDate = DateConverterFormat(arrayLast4buyTrans[i].INV_DATE__c);
                        dataArray.push([vLastInvoiceDate, vLastPrice]);
                    }
                    dataArray.reverse();
                    vDataTable = new google.visualization.DataTable();
                    if (dataArray.length != 0) {
                        vDataTable.addColumn('string', 'Date');
                        vDataTable.addColumn('number', 'Price');
                        for (var i = 0; i < dataArray.length; i++) {
                            vDataTable.addRow([String(dataArray[i][0]), parseFloat(dataArray[i][1])]);
                        }
                        options = {
                            title: 'Last 4 Buy ',
                            pointSize: 8,
                            hAxis: {
                                title: 'Date',
                                titleTextStyle: {
                                    color: 'red'
                                }
                            },
                            vAxis: {
                                title: 'Price',
                                titleTextStyle: {
                                    color: 'red'
                                }
                            }
                        };
                        chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                        chart.draw(vDataTable, options);
                    } else {
                        $("#chart_div").text("No Last 4 Buy transactions are available for this product.").css("color", "red");
                    }
                }
            }
            drawChart();


            var updateCPRErrText;
            var prd_CPRvalue;
            var displayCPRLog = false;
            var cprUpdateInProgress = false;
            var refreshPricingInProgress = false;
            var removeFromWLInProgress = false;
            var prd_hasError;
            var priceVarDetected;
            var tabOrderCounter = 0;
            /**
             * Function Name : GenerateTableRow
             * Arguments: productData
             * Description: This Function is used to generate the table.
             */
            function GenerateTableRow(productData) {
                priceVarDetected = productData.Price_Variance_Detected__c;
                var prd_TANName = productData.Account__r.Tandem_Account_Name__c;
                DecodeEntitiesFunc(prd_TANName);
                var prd_TANNo = productData.Account__r.Tandem_Account_Number__c;
                var prd_Description;
                if (productData.Product_Description__c == null || productData.Product_Description__c == undefined || !productData.Product_Description__c) {
                    prd_Description = '';
                } else {
                    prd_Description = productData.Product_Description__c;
                }
                var prd_Id = productData.Id;
                var prd_Pack_Size = productData.Pack_Size__c;
                var prd_Brand = productData.Brand__c;
                var prd_Product_Number;
                if (productData.Product_Number__c == null || productData.Product_Number__c == undefined || !productData.Product_Number__c) {
                    prd_Product_Number = '';
                } else {
                    prd_Product_Number = productData.Product_Number__c;
                }
                var prd_Product_Id = productData.Watchlist_Product_Id__c;
                var prd_reviewd = productData.Reviewed_Product__c;
                //  console.log('Reviewed or Unreviewed : '+prd_reviewd);
                var prd_PIMClass = productData.pimClass;
                var prd_Last4buyQty = productData.Last4buyQty;
                var prd_CurrentlastWeekPrice = productData.Current_Week_Price__c;
                var prd_lastWeekPrice = productData.Last_Week_Price__c;
                var prd_WWP;
                if (productData.WWP__c == null || productData.WWP__c == undefined || !productData.WWP__c) {
                    prd_WWP = '';
                } else {
                    prd_WWP = productData.WWP__c;
                }
                var prd_GPD = productData.GPD__c;
                var prd_GP = productData.GP__c;
                var prd_TGT = productData.Target__c;
                var prd_MAX = productData.MAX__c;
                var prd_MIN = productData.MIN__c;
                var prd_Sell = productData.Sell__c;
                var prd_List = productData.List__c;
                var prd_Floor = productData.Floor__c;
                var prd_Account__c = productData.Account__c;
                var prd_COM = productData.COM__c;
                var prd_PriceVarianceCalc = productData.Dollor_Variance_Calc__c;
                var prd_PriceVariance = productData.Price_Variance_Detected__c;
                var prd_isOpptyPrd = productData.Is_Opportunity_Product__c;
                var prd_IsWatchlistprd = productData.isWatLstPrd;
                var prd_Passenger = productData.Passenger__c;
                var prd_CookbookDivisionIndicator = productData.CookBook_Division_Indicator__c;
                var prd_CCPPlusDivisionIndicator = productData.CCP_Plus_Division_Indicator__c;
                var prd_CookbookProductIndicator = productData.CookBook_Product_Indicator__c;
                var prd_cprSetUpIndcatr = productData.CPR_Setup_Indicator__c;
                var prd_lastPriceHoldValue = productData.Last_Price_Hold_Value__c;//SSDR23-566 Phani
                var prd_marketChangeforUI = productData.Market_Change_for_UI__c; // Phani added for SSDR23-555 story
                var cprMessageDisplayed = false;

                if (productData.CPR__c == undefined || productData.CPR__c == 'NaN') {
                    prd_CPRvalue = '';
                } else {
                    prd_CPRvalue = productData.CPR__c;
                }
                var prd_LocallyPricedIndicator = productData.Locally_Priced_Indicator__c;
                error_Text = productData.PRD_Error_Text__c;
                updateCPRErrText = productData.CPR_Update_Error_Text__c;
                var cprSubmitStatus = productData.CPR_Submit_Status__c;
                if (displayCPRLog) { // display CPR message
                    if (updateCPRErrText != undefined) {
                        cprErrorRowFunc(updateCPRErrText);
                        cprMessageDisplayed = true;
                    } else if (cprSubmitStatus != undefined) {
                        if (cprSubmitStatus == 'Success') {
                            cprErrorRowFunc('CPR updates processed successfully.');
                            cprMessageDisplayed = true;
                        }
                    }
                }

                //display error message on product level if it exists
                if (error_Text != undefined && cprMessageDisplayed == false) {
                    ErrorRowFunc(error_Text);
                }
                // GA 12/1: DO NOT display any header error messages here. This will be handled from the AccountListFunc(), updatePrdCPRValues() and refreshfunc() functions

                var table = document.getElementById("tblProducts");
                var rowCount = table.rows.length;
                tabOrderCounter++;
                row = table.insertRow(-1);
                row.id = "ROW" + prd_Id;

                // logic to determine whether user cannot "set" M, T, X for CPR value
                if (!(prd_CookbookDivisionIndicator && prd_CookbookProductIndicator)) {
                    console.log('cook&product');
                    arrLProd.push(prd_Id);
                }else{
                   console.log('not');                  
                }
                console.log(productData);

                // logic to determine if min, tar, max is used instead of floor, sell list
                var displayMTX = false;
                if (prd_CookbookProductIndicator && (prd_CookbookDivisionIndicator || prd_CCPPlusDivisionIndicator)) {
                    displayMTX = true;
                }

                /*Code added to display a green check, starts [Deepanshu Soni:SSCD-207]*/
                let isGreenCheck = false;
                if(prd_LocallyPricedIndicator!=undefined && prd_LocallyPricedIndicator == false){ 
                    if (!displayMTX) {
                        if (
                            prd_CurrentlastWeekPrice != undefined &&
                            prd_CurrentlastWeekPrice != null &&
                            prd_CurrentlastWeekPrice != 0 &&
                            prd_Sell != undefined &&
                            prd_Sell != null &&
                            prd_List != undefined &&
                            prd_List != null &&
                            TwoDecimalFunc(prd_CurrentlastWeekPrice)*10 >= TwoDecimalFunc(prd_Sell)*10 
                        ) {
                            isGreenCheck = true;
                        }
                    } else {
                        if (
                            prd_CurrentlastWeekPrice != undefined &&
                            prd_CurrentlastWeekPrice != null &&
                            prd_CurrentlastWeekPrice != 0 &&
                            prd_TGT != undefined &&
                            prd_TGT != null &&
                            prd_MAX != undefined &&
                            prd_MAX != null &&
                            TwoDecimalFunc(prd_CurrentlastWeekPrice)*10 >= TwoDecimalFunc(prd_TGT)*10 
                        ) {
                            isGreenCheck = true;
                        }
                    }
                }
                /*Code added to display a green check, ends [Deepanshu Soni:SSCD-207]*/

                // logic to display watchlist product table row content
                for (var j = 0; j < 7; j++) {
                    var cell = row.insertCell(-1);
                    if (j == 0) // REMOVE FROM WATCH LIST ICON
                    {
                        cell.innerHTML = '<div class="font12NLH16Green" style="text-align:center;margin-top:14px;font-weight:bold;" id="divCell0" ><a href="javascript://" class="theclass" style="cursor:pointer" onclick="remFromWatchList(\'' + prd_Product_Id + '\',\'' + prd_Account__c + '\'); return false;"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/watch-list-color-32.png')}" width="18" height="22" align="middle" /></a></div>';
                        cell.style.width = "50px";
                    } else if (j == 1) // CUSTOMER
                    {
                        cell.innerHTML = '<div class="font12NLH16" style="text-align:center;margin-top:14px;" id="divCell1" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');captureWeeklyViewDate_Fun(\'' + row.id + '\');//added for story SSDR23-1581"><a href="javascript://" style="text-decoration:none;color:#000000" />' + DecodeEntitiesFunc(DecodeEntitiesFunc(prd_TANName)) + '</br>' + '(' + prd_TANNo + ')' + '</div>';
                        cell.style.width = "90px";
                    } else if (j == 2) // PRODUCT
                    {
                        cell.innerHTML = '<div class="font12NLH16 col-md-10" style="text-align:left;margin-top:2%;width:82%;padding:0;" id="divCell2" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');captureWeeklyViewDate_Fun(\'' + row.id + '\');//added for story SSDR23-1581"><a href="javascript://" style="text-decoration:none;color:#000000" /><strong>' + DecodeEntitiesFunc(DecodeEntitiesFunc(prd_Description)) + '</strong></br>' + DecodeEntitiesFunc(DecodeEntitiesFunc(prd_Brand)) + '</br>#' + prd_Product_Number + '<span id="spBar">|</span><span id="spWWP">WWP</span>' + prd_WWP + '</div>';
                        cell.style.width = "300px";

                        if (prd_Passenger == 'Y') // display passenger indicator
                        {
                            cell.innerHTML += '<div id="idPsggnrIndicator" class="col-md-1" style="float:right;padding:0;margin-top:3%;"><span class ="imgWrap"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/passenger-18.png')}" width="18" height="18"/><span class="imgDescription">Passenger Item</span></span></div>';
                        }

                        if (prd_PriceVariance) // display price variance indicator
                        {
                            cell.innerHTML += '<div id="varianceimg" class="col-md-1" style ="float:right;padding:0;margin-top:3%;"><span class ="imgWrap"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/price-variance-18.png')}" width="18" height="18"/><span class="imgDescription">Price Variance Outside Range</span></span></div>';
                        }

                        if (prd_LocallyPricedIndicator == true) { // display red L
                            cell.innerHTML += '<div id="Localpriceimg" class="col-md-1" style="float:right;padding:0;margin-top:3%;"><span class ="imgWrap"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/locally-priced-18.png')}" width="18" height="18"/><span class="imgDescription">Locally Priced</span></span></div>';
                        }

                        if (prd_isOpptyPrd) { // display opportunity indicator
                            cell.innerHTML += '<div id="divImageBulb" class="col-md-1" style="float:right;padding:0;margin-top:3%;"><span class ="imgWrap"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/opportunity-coin-18.png')}" width="18" height="18"/><span class="imgDescription">Opportunity Product</span></span></div>';
                        }
                        /*Code added to display a green check, starts [Deepanshu Soni:SSCD-207]*/
                        if (isGreenCheck) { // display a green tick
                            cell.innerHTML += '<div id="greentick" class="col-md-1" style="float:right;padding:0;margin-top:3%;"><span class ="imgWrap"><img src="{!URLFOR($Resource.greenCheckmark)}" width="18" height="18"/><span class="imgDescription">Product priced as Target or above</span></span></div>';
                        }                        
                        /*Code added to display a green check, ends [Deepanshu Soni:SSCD-207]*/
                        //add START by phani SSDR23-566
                        if (prd_lastPriceHoldValue=='A') { 
                            cell.innerHTML += '<div id="grayArrow" class="col-md-1" style="float:right;padding:0;margin-top:3%;"><span class ="imgWrap"><img src="{!URLFOR($Resource.grayArrow)}" width="18" height="18"/><span class="imgDescription">CPR Auto Assist</span></span></div>';
                        }//add START by phani SSDR23-566


                    } else if (j == 3) // $ CURRENT/ $ LAST WEEK
                    {
                        //  var diffCurLastWkPrice=(prd_CurrentlastWeekPrice-prd_lastWeekPrice).toFixed(2);                       
                        var diffCurLastWkPrice;
                        //Phani added changes START for SSDR23-555
                        if(prd_marketChangeforUI==undefined || prd_marketChangeforUI==null || !prd_marketChangeforUI) {                            
                            prd_marketChangeforUI='$0.00';
                        }
                        //Added by Phani for SSDR23-663
                        if(isNaN(prd_CurrentlastWeekPrice)){
                            prd_CurrentlastWeekPrice = 0.00;
                        }
                        if(isNaN(prd_lastWeekPrice)){
                            prd_lastWeekPrice = 0.00;
                        }
                        //Phani changes ends
                        //Phani changes ENDS for SSDR23-555
                        if ((prd_CurrentlastWeekPrice == undefined && prd_lastWeekPrice == undefined) || (prd_CurrentlastWeekPrice == null && prd_lastWeekPrice == null) || (!prd_CurrentlastWeekPrice && !prd_lastWeekPrice)) {
                            prd_CurrentlastWeekPrice = 0.00;
                            prd_lastWeekPrice = 0.00;
                            diffCurLastWkPrice = 0.00;
                        } else {
                             diffCurLastWkPrice = (prd_CurrentlastWeekPrice - prd_lastWeekPrice).toFixed(2);                            
                        }                        
                        // Phani Made changes on below lines for bug SSDR23-637 on 10/26/2018
                        // Phani made below changes to stamp market change value for story SSDR23-555 by commenting out the old lines and making new lines below
                        if (diffCurLastWkPrice > 0) {
                            //  cell.innerHTML = '<div class="font12NLH16Green" style="/*text-align:center;*/margin-top:12%;font-family: Arial;font-size: 12px;" id="divCell3" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');"><a href="javascript://" style="color:#C1C1C1;text-decoration:none;" ><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-13%;*/"><strong>CUR:<span style="float:right;font-weight:normal;">$' + prd_CurrentlastWeekPrice.toFixed(2) + '</span></strong></div><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-18%;*/"><strong>LW:</strong><span style="float:right;">$' + prd_lastWeekPrice.toFixed(2) + '</span></div></a><div style="border-bottom:1px solid #AAA"></div><div><span class ="imgWrap"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/sm-blue-arrow-up-16.png')}" width="12" height="12" style="float:left;"/><span class="imgDescription">Price Increase</span></span><div style="/*margin-top: -24%;margin-left: 25%;*/float:right;">+$' + diffCurLastWkPrice + '</div></div>';
                            cell.innerHTML = '<div class="font12NLH16Green" style="/*text-align:center;*/margin-top:12%;font-family: Arial;font-size: 12px;" id="divCell3" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');captureWeeklyViewDate_Fun(\'' + row.id + '\');//added for story SSDR23-1581"><a href="javascript://" style="color:#C1C1C1;text-decoration:none;" ><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-13%;*/"><strong>CUR:<span style="float:right;font-weight:normal;">$' + prd_CurrentlastWeekPrice.toFixed(2) + '</span></strong></div><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-18%;*/"><strong>LW:</strong><span style="float:right;">$' + prd_lastWeekPrice.toFixed(2) + '</span></div></a><div style="border-bottom:1px solid #AAA"></div><span class ="imgWrap"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/sm-blue-arrow-up-16.png')}" width="12" height="12" style="float:left;"/><span class="imgDescription">Price Increase</span></span><div style="/*margin-top: -24%;margin-left: 25%;*/float:right;">+$' + TwoDecimalFunc(Math.abs(diffCurLastWkPrice)) + '</div><br/><div><span title="Market Change"><strong>MKT:</strong></span><div style="/*margin-top: -24%;margin-left: 25%;*/float:right;">' + prd_marketChangeforUI + '</div></div>';
                            
                        } else if (diffCurLastWkPrice < 0) {
                            //     cell.innerHTML = '<div class="font12NLH16Green" style="/*text-align:center;*/margin-top:12%;font-family: Arial;font-size: 12px;" id="divCell3" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');"><a href="javascript://" style="color:#C1C1C1;text-decoration:none;" ><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-13%;*/"><strong>CUR:<span style="float:right;font-weight:normal;">$' + prd_CurrentlastWeekPrice.toFixed(2) + '</span></strong></div><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-18%;*/"><strong>LW:</strong><span style="float:right;">$' + prd_lastWeekPrice.toFixed(2) + '</span></div></a><div style="border-bottom:1px solid #AAA"></div><div><span class ="imgWrap"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/sm-gold-arrow-down-16.png')}" width="12" height="12" style="float:left;"/><span class="imgDescription">Price Decrease</span></span><div style="/*margin-top: -24%;margin-left: 25%;*/float:right;">($' + TwoDecimalFunc(Math.abs(diffCurLastWkPrice)) + ')</div></div>';
                            cell.innerHTML = '<div class="font12NLH16Green" style="/*text-align:center;*/margin-top:12%;font-family: Arial;font-size: 12px;" id="divCell3" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');captureWeeklyViewDate_Fun(\'' + row.id + '\');//added for story SSDR23-1581"><a href="javascript://" style="color:#C1C1C1;text-decoration:none;" ><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-13%;*/"><strong>CUR:<span style="float:right;font-weight:normal;">$' + prd_CurrentlastWeekPrice.toFixed(2) + '</span></strong></div><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-18%;*/"><strong>LW:</strong><span style="float:right;">$' + prd_lastWeekPrice.toFixed(2) + '</span></div></a><div style="border-bottom:1px solid #AAA"></div><span class ="imgWrap"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/sm-gold-arrow-down-16.png')}" width="12" height="12" style="float:left;"/><span class="imgDescription">Price Decrease</span></span><div style="/*margin-top: -24%;margin-left: 25%;*/float:right;">($' + TwoDecimalFunc(Math.abs(diffCurLastWkPrice)) + ')</div><br/><div><span title="Market Change"><strong>MKT:</strong></span><div style="/*margin-top: -24%;margin-left: 25%;*/float:right;">' + prd_marketChangeforUI + '</div></div>';
                            
                        } else { // diffCurLastWkPrice == 0
                            //    cell.innerHTML = '<div class="font12NLH16Green" style="/*text-align:center;*/margin-top:12%;font-family: Arial;font-size: 12px;" id="divCell3" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');"><a href="javascript://" style="color:#C1C1C1;text-decoration:none;" ><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-13%;*/"><strong>CUR:<span style="float:right;font-weight:normal;">$' + prd_CurrentlastWeekPrice.toFixed(2) + '</span></strong></div><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-18%;*/"><strong>LW:</strong><span style="float:right;">$' + prd_lastWeekPrice.toFixed(2) + '</span></div></a><div style="border-bottom:1px solid #AAA"></div><div><!--<img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/sm-blue-arrow-up-16.png')}" width="12" height="12" style="float:left;"/>--><div style="/*margin-top: -24%;margin-left: 25%;*/float:right;">$' + diffCurLastWkPrice + '</div></div>';
                            cell.innerHTML = '<div class="font12NLH16Green" style="/*text-align:center;*/margin-top:12%;font-family: Arial;font-size: 12px;" id="divCell3" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');captureWeeklyViewDate_Fun(\'' + row.id + '\');//added for story SSDR23-1581"><a href="javascript://" style="color:#C1C1C1;text-decoration:none;" ><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-13%;*/"><strong>CUR:<span style="float:right;font-weight:normal;">$' + prd_CurrentlastWeekPrice.toFixed(2) + '</span></strong></div><div style="color:#3b3b3b;text-decoration:none;/*margin-left:-18%;*/"><strong>LW:</strong><span style="float:right;">$' + prd_lastWeekPrice.toFixed(2) + '</span></div></a><div style="border-bottom:1px solid #AAA"></div><div style="/*margin-top: -24%;margin-left: 25%;*/float:right;">$' + TwoDecimalFunc(Math.abs(diffCurLastWkPrice)) + '</div><br/><div><span title="Market Change"><strong>MKT:</strong></span><div style="/*margin-top: -24%;margin-left: 25%;*/float:right;">' + prd_marketChangeforUI + '</div></div>';
                            
                        }//ENDS changes for SSDR23-555
                        cell.style.width = "115px";
                    } else if (j == 4) // Pricing
                    {

                        if (prd_Sell == undefined || prd_Sell == null || !prd_Sell) {
                            prd_Sell = 0.00;
                        }
                        if (prd_List == undefined || prd_List == null || !prd_List) {
                            prd_List = 0.00;
                        }
                        if (prd_Floor == undefined || prd_Floor == null || !prd_Floor) {
                            prd_Floor = 0.00;
                        }
                        if (prd_TGT == undefined || prd_TGT == null || !prd_TGT) {
                            prd_TGT = 0.00;
                        }
                        if (prd_MAX == undefined || prd_MAX == null || !prd_MAX) {
                            prd_MAX = 0.00;
                        }
                        if (prd_COM == undefined || prd_COM == null || !prd_COM) {
                            prd_COM = 0.00;
                        }


                        if (!displayMTX) //if(prd_LocallyPricedIndicator == true)
                        {
                            cell.innerHTML = '<div class="font12NLH16Green" style="/*text-align:center;*/margin-top:12%;font-size:12px;font-family:Arial;" id="divCell4" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');captureWeeklyViewDate_Fun(\'' + row.id + '\');//added for story SSDR23-1581"><a href="javascript://" style="color:#C1C1C1;text-decoration:none;" ><div style="color:#3b3b3b;text-decoration:none;"><strong>TGT:</strong><span style="float:right;">$' + TwoDecimalFunc(prd_Sell) + '</span></div><div style="color:#3b3b3b;text-decoration:none;"><strong>MAX:</strong><span style="float:right;">$' + TwoDecimalFunc(prd_List) + '</span></div></a><div style="border-bottom:1px solid #AAA"></div><div style="margin-top: 2%;color:#3b3b3b;"><span><strong>COM:</strong></span><span style="float:right;">$' + TwoDecimalFunc(prd_COM /*prd_Floor*/ ) + '</span></div></div>';
                            cell.style.width = "115px";
                        } else {
                            cell.innerHTML = '<div class="font12NLH16Green" style="/*text-align:center;*/margin-top:12%;font-size:12px;font-family:Arial;" id="divCell4" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');captureWeeklyViewDate_Fun(\'' + row.id + '\');//added for story SSDR23-1581"><a href="javascript://" style="color:#C1C1C1;text-decoration:none;"><div style="color:#3b3b3b;text-decoration:none;"><strong>TGT:</strong><span style="float:right;">$' + TwoDecimalFunc(prd_TGT) + '</span></div><div style="color:#3b3b3b;text-decoration:none;"><strong>MAX:</strong><span style="float:right;">$' + TwoDecimalFunc(prd_MAX) + '</span></div></a><div style="border-bottom:1px solid #AAA"></div><div style="margin-top: 2%;color:#3b3b3b;"><span><strong>COM:</strong></span><span style="float:right;">$' + TwoDecimalFunc(prd_COM) + '</span></div></div>';
                            cell.style.width = "115px";
                        }

                    } else if (j == 5) // CPR Field
                    {

                        if (error_Text != undefined || (prd_Passenger != undefined && prd_Passenger == 'Y') || (prd_cprSetUpIndcatr != undefined && prd_cprSetUpIndcatr == 'N')) {
                            cell.innerHTML = '<div class="font12NLH16" style="text-align:center;padding-top:22px;" id="divCell5" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');captureWeeklyViewDate_Fun(\'' + row.id + '\');//added for story SSDR23-1581"> <input type="text" name="currency" disabled="disabled"  id="idCPR' + prd_Id + '" return false;" style="text-align:center; line-height:20px;height:20pt;vertical-align:middle;width:100%;min-width:22px;" /></div>';
                            cell.style.width = "90px";
                        } else {
                            cell.innerHTML = '<div class="font12NLH16" style="text-align:center;padding-top:22px;" id="divCell5" onClick=""> <input type="text" onkeypress="return isNumberKey(event)"  name="currency" autocomplete="off" tabindex="' + tabOrderCounter + '" onfocus="mappingPrd(\'' + prd_Product_Id + '\'); changeColor(\'' + row.id + '\');captureWeeklyViewDate_Fun(\'' + row.id + '\');//added for story SSDR23-1581" value="' + convertToCurrency(prd_CPRvalue) + '" id="idCPR' + prd_Id + '" onchange="autosaveCPRFieldValue(\'' + prd_Id + '\',this.value);  return false;" style="text-align:center; line-height:20px;height:20pt;vertical-align:middle;width:100%;min-width:22px;" /></div>';
                            cell.style.width = "90px";
                        }

                    } else if (j == 6) // GPD/GP%
                    {
                        if (prd_GPD == undefined || prd_GPD == null || !prd_GPD) {
                            prd_GPD = 0.00;
                        }
                        if (prd_GP == undefined || prd_GP == null || !prd_GP) {
                            prd_GP = 0.00;
                        }

                        cell.innerHTML = '<div class="font12NLH16" style="text-align:center;padding-top:22px;" id="divCell6" onClick="mappingPrd(\'' + prd_Product_Id + '\');changeColor(\'' + row.id + '\');captureWeeklyViewDate_Fun(\'' + row.id + '\');//added for story SSDR23-1581"><a href="javascript://" style="color:#C1C1C1;text-decoration:none;" ><div style="float:left;margin-top:5%;"></div><span style="color:black;text-decoration:none;margin-left:-1%;">' + convertToCurrency(prd_GPD) + '<span></a><div style="border-bottom:1px solid #cfd0d2"></div><div style="margin-top: 2%;margin-left: 2%;">' + prd_GP + '%</div></div>';

                        cell.style.width = "70px";
                    }
                }
                if (productData.Reviewed_Product__c)
                    document.getElementById(row.id).style.backgroundColor = "#FFFFFF";
                else
                    document.getElementById(row.id).style.backgroundColor = "#e5eef2";
            }
            /**
             * Function Name : convertToCurrency
             * Arguments: Integer
             * Description: This is used to convert a number to two digit number.
             */
            function convertToCurrency(value) {
                if (value == undefined) {
                    return '';
                }
                console.log('value is ' + value + '  type is ' + $.type(value));
               
                
                if ($.isNumeric(value)) {    
                    var valueNum = TwoDecimalFunc(value);
                    if (valueNum < 0) {
                        return "($" + Math.abs(valueNum).toFixed(2) + ')';
                    }

                    return "$" + valueNum;
                }
                return value;
            }
            /**
             * Function Name : TwoDecimalFunc
             * Arguments: Integer
             * Description: This Function is called in convertToCurrency Function.
             */
            function TwoDecimalFunc(val) {
                return parseFloat(val * 100 / 100).toFixed(2);
            }
        /*Description : force user to enter only numeric value */
        function isNumberKey(evt)
        {
            var charCode = (evt.which) ? evt.which : evt.keyCode;
            if (charCode != 46 &&charCode != 36 && charCode > 31 && (charCode < 48 || charCode > 57))
                return false;
            
            return true;
        }
            /**
             * Function Name : remFromWatchList
             * Arguments: ProductNumber,AccountId
             * Description: This function is used for removing product from watchlist.
             */
            function remFromWatchList(Product_Number, vAccId) {

                if (removeFromWLInProgress == false) {
                    removeFromWLInProgress = true;
                    VFC_PricingEnquiry.removeWatchList(Product_Number, function(result, event) {
                        if (event.status) {
                            //R.B 04/26/2017:
                            pos_Of_Scroll_jv = document.getElementById("iddDiv").scrollTop;
                            FilterSortGroupByWatchListFunc();
                            totalAccountWL--;
                            accountWLCount[vAccId] -= 1;
                            //update customer drop down list counter
                            var customerWLCount = document.getElementById(vAccId + 'wlCount');
                            customerWLCount.textContent = accountWLCount[vAccId] + '/25';
                            if (accountWLCount[vAccId] < 25) {
                                customerWLCount.style = "color:#000000";
                            }
                        } else { // response failed
                            displayHeaderErrorMessage(defaultErrorMessage, false);
                        }
                        removeFromWLInProgress = false;
                    });
                }
            }
            /**
             * Function Name : DateConverterFormat
             * Arguments: NA
             * Description: This function is used to change the US date format MM/DD/YYYY.
             */
            function DateConverterFormat(timestamp) {
                if (timestamp == undefined) {
                    return '';
                } else if (timestamp.length == 8) {
                    if (timestamp != undefined)
                        return timestamp.substr(4, 2) + '/' + timestamp.substr(6, 2) + '/' + timestamp.substr(0, 4);
                } else {
                    var a = new Date(timestamp);
                    var year = a.getUTCFullYear();
                    var month = a.getUTCMonth() + 1;
                    var day = a.getUTCDate();

                    if (day < 10) {
                        day = '0' + day
                    }
                    if (month < 10) {
                        month = '0' + month
                    }

                    return (month + '/' + day + '/' + year);
                }
            }
            /**
             * Function Name : CleanUpTable
             * Arguments: NA
             * Description: This Function is used to convert entity to strings.
             */
            function DecodeEntitiesFunc(s) {
                return $("<div/>").html(s).text();
            }

            var inProgressWSCalls = 0; // used to track the # of WS calls made
            /**
             * Function Name : refreshfunc
             * Arguments: NA
             * Description: This Function is used to refresh all products data.
             */
            function refreshfunc() {
                if (refreshPricingInProgress == false) {
                    refreshPricingInProgress = true;
                    inProgressWSCalls = 0;
                    var wsAccountLimit = 20; // Used to set batch size of how many accounts to process in one remote action call
                    var wsAccountCounter = 0;
                    var headerErrorSet = new Set();

                    CleanUpTable();

                    // clear header error messages
                    document.getElementById("idAllErrorMsgs").innerHTML = "";

                    document.getElementById('load').style.visibility = "visible";

                    do {
                        var tempAcctIdSet = [];

                        // i counts towards limit, wsAccountCounter indexes product to call WS for
                        for (var i = 0; i < wsAccountLimit && wsAccountCounter < acctIds.length; i++) {
                            tempAcctIdSet[i] = acctIds[wsAccountCounter];
                            wsAccountCounter++;
                        }

                        inProgressWSCalls++;
                        VFC_PricingEnquiry.updateWatchList(tempAcctIdSet, function(result, event) {
                            if (event.status) {
                                var allWLProducts = result.allWLProducts;
                                var allWLProductsLength = allWLProducts.length;

                                if (allWLProductsLength > 0) {
                                    //successful refresh - update last refresh date/time
                                    var date;
                                    for (var i = 0; i < allWLProductsLength; i++) {
                                        date = new Date(allWLProducts[i].Last_Refresh_Date_Time__c)
                                        if (lastRefreshDate == undefined) {
                                            lastRefreshDate = date;
                                        } else if (lastRefreshDate < date) { // set lastRefreshDate to the most recent refresh date/time
                                            lastRefreshDate = date;
                                        }
                                    }

                                    var lastRefreshDateStr = lastRefreshDate.toLocaleDateString() + ' ' + lastRefreshDate.toLocaleTimeString();
                                    document.getElementById("lastrfresh").innerHTML = " (Last refresh: " + lastRefreshDateStr + ")";

                                    var businessErrorMessagesLength = result.businessErrorMessages.length;
                                    for (var i = 0; i < businessErrorMessagesLength; i++) {
                                        headerErrorSet.add(result.businessErrorMessages[i]);
                                    }
                                } else {
                                    // failed refresh - need to handle this
                                    var businessErrorMessagesLength = result.businessErrorMessages.length;
                                    for (var i = 0; i < businessErrorMessagesLength; i++) {
                                        headerErrorSet.add(result.businessErrorMessages[i]);
                                    }
                                }
                            } else { // response failed
                                displayHeaderErrorMessage(defaultErrorMessage, false);
                            }

                            inProgressWSCalls--;

                            if (inProgressWSCalls <= 0) { // if all remote action calls have completed
                                var append = false;
                                document.getElementById('load').style.visibility = "hidden";

                                headerErrorSet.forEach(function(value) {
                                    displayHeaderErrorMessage(value, append);
                                    append = true;
                                });

                                FilterSortGroupByWatchListFunc();
                                refreshPricingInProgress = false;
                            }
                        });
                    } while (wsAccountCounter < acctIds.length); // keep calling byProduct for tempAcctIdSet set until all acctIds refreshed
                }
            }
            /**
             * Function Name : padValue
             * Arguments: NA
             * Description: This Function is used to padding the number.
             */
            function padValue(value) {
                return (value < 10) ? "0" + value : value;

            }
            /**
             * Function Name : padValue
             * Arguments: NA
             * Description: This Function is used to change the color based on rowId. //R.M 01/23/2017 US1723:temprory method
             */
            function changeColor(rowId) {
                console.log(prds_arr[rowId].Product_Number__c + '::::' + prds_arr[rowId].Reviewed_Product__c);


                if (!document.getElementsByTagName || !document.createTextNode) return;
                var tbl = document.getElementById("watchListTable");
                var count = document.getElementById('tblProducts');
                var rows = document.getElementById('watchListTable').getElementsByTagName('tbody')[0].getElementsByTagName('tr');
                var noOfRows = rows.length;
                //  console.log('previousRowId'+ previousRowId);
                //  console.log('current'+ rowId);
                if (!prds_arr[rowId].Reviewed_Product__c) {
                    if (previousRowId != null) {
                        prdsReviewedUnreviewed_Func(rowId);
                        document.getElementById(rowId).className = "even";
                        if (previousRowId != rowId && previousRowId != null && document.getElementById(previousRowId)!= undefined) {
                            document.getElementById(previousRowId).className = "odd";
                            document.getElementById(previousRowId).style.backgroundColor = "#FFFFFF";
                            previousRowId = rowId;
                        }
                    } else {
                        prdsReviewedUnreviewed_Func(rowId);
                        document.getElementById(rowId).className = "even";
                        previousRowId = rowId;
                    }
                } else {
                    if (previousRowId != null) {
                        document.getElementById(rowId).className = "even";
                        if (previousRowId != rowId && document.getElementById(previousRowId)!= undefined ) {
                            document.getElementById(previousRowId).className = "odd";
                            document.getElementById(previousRowId).style.backgroundColor = "#FFFFFF";
                            previousRowId = rowId;
                        }
                    } else {
                        document.getElementById(rowId).className = "even";
                        previousRowId = rowId;
                    }
                    
                }
            }

            /**
             * Function Name : RemovingProductDetails
             * Arguments: NA
             * Description: This Function is used to removing the product from watchlist.
             */

            function RemovingProductDetails() {
                document.getElementById("chart_div").innerHTML = "";
                document.getElementById('imageLinkId').innerHTML = "";
                document.getElementById("divTanName").innerHTML = "";
                document.getElementById("divProdDesc").innerHTML = "";
                document.getElementById("divPrdNumb").innerHTML = "";
                document.getElementById("divBrand").innerHTML = "";
                document.getElementById("divPackSiz").innerHTML = "";
                document.getElementById("spCurPrc").innerHTML = "";
                document.getElementById("spCOM").innerHTML = "";
                document.getElementById("spRationale").innerHTML = "";
                document.getElementById("spGPD").innerHTML = "";
                document.getElementById("spBrkSurchrge").innerHTML = "";
                document.getElementById("spEachPrice").innerHTML = "";
                document.getElementById("cprAdjustedDate").innerHTML = ""; //Code added by Deepanshu for SSCD-292, CPR Adjusted Date
                document.getElementById("spLastWkPrice").innerHTML = "";
                document.getElementById("spLastWkPriceDate").innerHTML = "";
                document.getElementById("spCBANumber").innerHTML = "";
                document.getElementById("spCBAAmount").innerHTML = "";
                document.getElementById("spCBAEndDate").innerHTML = "";
                document.getElementById("driverInformation").innerHTML = "";
                document.getElementById("passengerIndicator").innerHTML = "";
                document.getElementById("spTarg").innerHTML = "";
                document.getElementById("spMax").innerHTML = "";
                document.getElementById("spMin").innerHTML = "";
                document.getElementById("idCPR" + currPrdNumber).innerHTML = "";
                CleanUpLastFourBuyTable();
            }

            /**
             * Function Name : mappingPrd
             * Arguments: ProductId
             * Description: This function is used to copy whole product data to right side table when a user clicks on any block of each row/column.
             */
            function mappingPrd(vPrdId) {
                var prdData;
                for (var i = 0; i < prdDataArray.length; i++) {
                    if (prdDataArray[i].Watchlist_Product_Id__c == vPrdId) {
                        currPrdId = prdDataArray[i].Id;
                        prdData = prdDataArray[i];
                        break;
                    }

                }
                //R.M 01/19/2017 US1723:
                rightSideMapping(prdData);

            }

            /**
             * Function Name : CleanUpLastFourBuyTable
             * Arguments: NA
             * Description: This function is for deleting Lastfourbuytable.
             */
            function CleanUpLastFourBuyTable() {
                var table = document.getElementById("idLastFourBuys");
                var rowCount = table.rows.length;
                if (rowCount <= 0)
                    return;

                for (var i = rowCount - 1; i >= 0; i--) {
                    table.deleteRow(i);
                }
            }
            /**
             * Function Name : ErrorRowFunc
             * Arguments: String errText
             * Description: This function is used to show product level error message.
             */
            function ErrorRowFunc(errText) {
                var table = document.getElementById('tblProducts');
                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                row.id = "noErrorRow";
                var cell = row.insertCell(0);
                var custName = errText;
                document.getElementById('tblProducts').rows[rowCount].cells[0].innerHTML = '<div style="color:red;background-color: #FFF2D4;"><div class="Err_msg" id="divPosCust"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/alert-16.png')}" width="15" height="15" style="margin-top: -0.6%;"/>&nbsp;' + custName + '</div>';
                document.getElementById('tblProducts').rows[rowCount].cells[0].colSpan = 7
            }
            /**
             * Function Name : cprErrorRowFunc
             * Arguments: String messageText
             * Description: This function is used to show CPR messages at product level.
             */
            function cprErrorRowFunc(messageText) {

                var table = document.getElementById('tblProducts');
                var rowCount = table.rows.length;
                var row = table.insertRow(rowCount);
                row.id = "noErrorRow";
                var cell = row.insertCell(0);

                if (messageText == 'CPR updates processed successfully.') {
                    document.getElementById('tblProducts').rows[rowCount].cells[0].innerHTML = '<div style="color:green; background-color: #FFF2D4;" class="Err_msg" id="divPosCust">' + messageText + '</div>';
                } else {
                    document.getElementById('tblProducts').rows[rowCount].cells[0].innerHTML = '<div style="color:red; background-color: #FFF2D4;" class="Err_msg" id="divPosCust">' + messageText + '</div>';
                }


                document.getElementById('tblProducts').rows[rowCount].cells[0].colSpan = 7
            }

            /**
             * Function Name : autosaveCPRFieldValue
             * Arguments: prdCWSId,cprvalue
             * Description: This function is called when CPR value is changed on a product.
             */
            function autosaveCPRFieldValue(prdId, cprValue) {

                cprModified = true;
                /* added by Praveen for story SSDR23-1576 START */
                 if(cprValue.toString()=='undefined' || cprValue.toString()==''){
                    cprValue='';
                }
                else if((cprValue.toString().indexOf('.') < 0) && $.isNumeric(cprValue) && cprValue!='')
                    cprValue=parseFloat(cprValue / 100).toFixed(2);
                /* added by Praveen for story SSDR23-1576 END*/
                 
                // if CPR value is numeric, convert the value to currency
                if ($.isNumeric(cprValue) ) {
                    document.getElementById("idCPR" + prdId).value = convertToCurrency(cprValue);
                }
                
                VFC_PricingEnquiry.autosaveCPRValue(prdId, cprValue, function(result, event) {
                    if (event.status) { // success saving cpr value to watchlist record
                    } else { // response failed
                        displayHeaderErrorMessage(defaultErrorMessage, false);
                    }

                    cprModified = false;
                    if (updateCPRPending) {
                        updatePrdCPRValues();
                    }
                });
            }
            /**
             * Function Name : CleanUpTable
             * Arguments: NA
             * Description: This Function is used to convert entity to strings.
             */
            function CleanUpTable() {
                var table = document.getElementById("tblProducts");
                var rowCount = table.rows.length;
                arrLProd = [];

                if (rowCount <= 0) {
                    return;
                }
                for (var i = rowCount - 1; i >= 0; i--) {
                    table.deleteRow(i);
                }
            }
            /**
             * Function Name : redirectToOrderGuide
             * Arguments: NA
             * Description: This Function is used to navigate to Order gudie page for selected customer with selected department.
             */

            function redirectToOrderGuide() {
                var selectedCustomerId = document.getElementById("mntWatchList").value;
                var departmentSelected = document.getElementById("mntDptList").value;

                var url = '/apex/VFP_Pricing_OG?UserId={!territoryMnId}&acctId=' + selectedCustomerId + '&dptId=' + departmentSelected;
                navigateToURLFunc(url);
            }
            /**
             * Function Name : onDepartmentChange
             * Arguments: rowId
             * Description: This function is called when there is a change in department.
             */
            function onDepartmentChange() {
                var selIdx = document.getElementById("mntDptList").selectedIndex;
                if (selIdx != -1) {
                    document.getElementById("btnGo").disabled = false;
                }
            }

            function prdtabs(evt, tabs) {
                var i, tabcontent, tablinks;
                tabcontent = document.getElementsByClassName("tabcontent");
                for (i = 0; i < tabcontent.length; i++) {
                    tabcontent[i].style.display = "none";
                }
                tablinks = document.getElementsByClassName("tablinks");
                for (i = 0; i < tablinks.length; i++) {
                    tablinks[i].className = tablinks[i].className.replace(" active", "");
                }
                document.getElementById(tabs).style.display = "block";
                evt.currentTarget.className += " active";

            }

            function refresh(e) {
                var x = document.lastModified;
                document.getElementById("lastrfresh").innerHTML = x;
                e.preventDefault();
            }
            /**
             * Function Name : learnmorefunc
             * Arguments: NA
             * Description: This function is used to show icons help text when user clicks on Learn More icon.
             */
            function learnmorefunc() {
                document.getElementById('light').style.display = 'block';
                document.getElementById('fade').style.display = 'block';
            }
            /**
             * Function Name : closefunc
             * Arguments: NA
             * Description: This function is called for closing the learnmore icon.
             */
            function closefunc() {
                document.getElementById('light').style.display = 'none';
                document.getElementById('fade').style.display = 'none';
            }
            /**
             * Function Name : updatePrdCPRValues
             * Arguments: NA
             * Description: This function is called when a user clicks on UpdateProductCPRs button for updating CPR value for single/multiple Products.
             */
            function updatePrdCPRValues() {
                var cprProductUpdateFailed = false;

                if (cprModified) { // action to update CPR value on Watch List record is in progress, queue up update product CPRs action once CPR value update is completed
                    console.log('Queued CPR Update Action');
                    updateCPRPending = true;
                } else if (cprUpdateInProgress == false) { // User already clicked on "Update Product CPRs", prevent user from clicking on "Update Product CPRs" multiple times
                    var accountOwnerId = "{!territoryMnId}";
                    cprUpdateInProgress = true;
                    displayCPRLog = true;
                    updateCPRPending = false;
                    CleanUpTable();
                    document.getElementById('load').style.visibility = "visible"; // show loading screen

                    VFC_PricingEnquiry.updateCPRforWatchList(accountOwnerId, function(result, event) {
                        if (event.status) {
                            //retreive all products with updated cpr values
                            var failedCPRUpdateProducts = result.allWLProducts;

                            for (var i = 0; i < failedCPRUpdateProducts.length; i++) {
                                if (failedCPRUpdateProducts[i].CPR_Submit_Status__c == 'Failed' || failedCPRUpdateProducts[i].CPR_Submit_Status__c == 'Invalid') {
                                    cprProductUpdateFailed = true;
                                    break;
                                }
                            }

                            if (result.cprUpdateFailed) {
                                var errorSet = result.businessErrorMessages;
                                var append = false;
                                for (var i = 0; i < errorSet.length; i++) {
                                    displayHeaderErrorMessage(errorSet[i], append);
                                    append = true;
                                }

                                if (cprProductUpdateFailed) {
                                    $("#idSelFilterBy").prop("selectedIndex", 4);//Modified by Veda vyas
                                }

                            } else { // display a success message
                                //  $("#idSelFilterBy").prop("selectedIndex", 4);
                                displayInformationMessage('CPR Updates processed successfully.', false);

                            }
                        } else { // response failed

                            displayHeaderErrorMessage(defaultErrorMessage, false);
                        }

                        document.getElementById('load').style.visibility = "hidden";
                        //R.M 02/01/2017 US1837:
                        //   $("#idSelFilterBy").prop("selectedIndex", 2);
                        FilterSortGroupByWatchListFunc();
                        cprUpdateInProgress = false;

                    });
                }

            }

            var url_selectedItemId;
            /**
             * Function Name : NavigatingOrdrGuidPagFunc
             * Arguments: NA
             * Description: This function is called when a user clicks on Edit List link or Add Products button.
             */
            function NavigatingOrdrGuidPagFunc() {
                var url_safe_TM = "{!territoryMnId}";
                var url_selIdx = document.getElementById("mntWatchList").selectedIndex;
                var url_itemsArr = document.getElementById("mntWatchList").options;
                var url_selItemIndex = url_itemsArr[url_selIdx];
                url = "/apex/VF_Pricing_Edit?UserId=" + url_safe_TM;

                navigateToURLFunc(url);
            }

            var cprValue;
            /**
             * Function Name : SetFunc
             * Arguments: NA
             * Description: This function is called when a user clicks any of the setMin,setMax, setTarget buttons in the right side table.
             */
            function SetFunc(item) {

               var setValue = document.getElementById(item).innerHTML;

               console.log('setValue: '+setValue);
               console.log('currPrdId: '+currPrdId);
               console.log(document.getElementById("idCPR" + currPrdId) );
               console.log( arrLProd );
               console.log( $.inArray(currPrdId, arrLProd) );

                if (document.getElementById("idCPR" + currPrdId).disabled == true) {
                    document.getElementById("idCPR" + currPrdId).value = ' ';
                } else {
                    if ($.inArray(currPrdId, arrLProd) !== -1) // if locally priced
                    {

                        var priceValue = setValue.split('$')[1];
                        var dd = parseFloat((priceValue * 100) / 100).toFixed(2);
                        document.getElementById("idCPR" + currPrdId).value = parseFloat((setValue.split('$')[1] * 100) / 100).toFixed(2);
                    } else { // cookbook product, use M, T or X value

                        if ('spMin' == item) {
                            document.getElementById("idCPR" + currPrdId).value = 'M';

                        } else if ('spTarg' == item) {
                            document.getElementById("idCPR" + currPrdId).value = 'T';
                        } else if ('spMax' == item) {
                            document.getElementById("idCPR" + currPrdId).value = 'X';
                        }

                    }
                    cprValue = document.getElementById("idCPR" + currPrdId).value;
                    console.log('CPR Value from SetFunc(): '+cprValue);
                    autosaveCPRFieldValue(currPrdId, cprValue);

                }

            }

            /**
             * Function Name : displayHeaderErrorMessage
             * Arguments: String informMessage, Boolean append
             * Description: Display all error messages in HeaderLevel (will limit characters to 255)
             */
            function displayHeaderErrorMessage(errorMessage, append) {
                //if error message exceeds 255 characters, add '...' at the end of the error message

                if (errorMessage != undefined && errorMessage.length >= 255) { //added a condition to handle when error message is not undefined
                    errorMessage = errorMessage.substring(0, 255);
                    errorMessage += '...'
                } else { // else is for handling errormessages within 255 characters.
                    errorMessage = errorMessage;
                }

                var vDivErrHeader = document.getElementById("idAllErrorMsgs");
                var divErr = document.createElement("div");
                divErr.className = "idErrValue";
                if (append) {
                    divErr.innerHTML = '<img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/alert-white-24.png')}" width="15" height="15" style="padding-left: 10px;padding-right: 10px;"/> ' + '<div style="margin-left:35px;margin-top:-17px;">' + errorMessage + '</div>';
                } else {
                    document.getElementById("idAllErrorMsgs").innerHTML = "";
                    divErr.innerHTML = '<img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/alert-white-24.png')}" width="15" height="15" style="padding-left: 10px;padding-right: 10px;"/> ' + '<div style="margin-left:35px;margin-top:-17px;">' + errorMessage + '</div>';
                }
                vDivErrHeader.appendChild(divErr);

            }

            /**
             * Function Name : displayInformationMessage
             * Arguments: String informMessage, Boolean append
             * Description: Display all information messages in HeaderLevel (will limit characters to 255)
             */
            function displayInformationMessage(informMessage, append) {

                if (informMessage != undefined && informMessage.length >= 255) { //added a condition to handle when error message is not undefined
                    informMessage = informMessage.substring(0, 255);
                    informMessage += '...'
                } else { // else is for handling informMessages within 255 characters.
                    informMessage = informMessage;
                }
                var vDivInforHeader = document.getElementById("idAllErrorMsgs");
                var divInformation = document.createElement("div");
                divInformation.className = "idInformValue";
                if (append) {
                    divInformation.innerHTML = '<div><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/info-white-24.png')}" width="15" height="15" /></div> ' + '<div style="margin-left:19px;margin-top:-17px;">' + informMessage + '</div>';
                } else {

                    document.getElementById("idAllErrorMsgs").innerHTML = "";
                    divInformation.innerHTML = '<div><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/info-white-24.png')}" width="15" height="15" /></div> ' + '<div style="margin-left:19px;margin-top:-17px;">' + informMessage + '</div>';
                }
                vDivInforHeader.appendChild(divInformation);


            }
            /*Code added by Deepanshu for SSCD-296, to implement auto scrolling, starts*/
            jQuery(
                function($) {
                    $('#iddDiv').bind('scroll', function() {
                        if ($(this).scrollTop() + $(this).innerHeight() >= $(this)[0].scrollHeight) {
                            console.log('Scrolling is reached bottom...');
                            showMoreProducts_JFunc();
                        }
                    });
                }
            );
            /*Code added by Deepanshu for SSCD-296, to implement auto scrolling, ends*/
        </script>
        <script>
            $(document).ready(function() {
                $("#idSelFilterBy").prop("selectedIndex", 9); // changed the value from 4 to 6 by for SSDR23-638 by Nimitha
            });
        </script>
        <style type="text/css">
            .whiteBck.bootstrap.jumbotron-fluid {
                border-color: #ccc;
                border-width: 1px;
                color: black;
                font-size: 6px;
                border-style: solid;
                clear: both;
            }

            .bootstrap h1 {
                margin-top: 5px !important;
                font-size: 48px;
                font-family: Helvetica Neue Med Cond;
                color: #CF4520 !important;
            }

            .whiteBck.bootstrap.col-md-1 {
                margin-left: 0px;
                /*margin-right: 26px;*/
            }

            /****************/

            .font13N {
                font-size: 13px;
                color: #3b3b3b;
                font-family: Arial !important;
            }

            .font12NR {
                font-size: 12px;
                color: #3b3b3b !important;
                font-family: HelveticaNeue-Arial !important;
            }            
            
            .whiteBck {
                background-color: #ffffff !important;
            }

            .silverBck {
                background-color: #f3f1f0 !important;
            }

            .lightGrayBck {
                background: #d8d8d8 !important;
            }

            .dullGrayBck {
                background-color: #f3f1f0 !important;
            }

            .oliveGreenBck {
                background-color: #B0BC22 !important;
            }

            .bottleGreenBck {
                background-color: #5C8727 !important;
            }

            .transparentBck {
                background-color: transparent !important;
            }

            .smokeGrayClr {
                color: #3b3b3b !important;
            }

            div.dropdown-menu>ul.dropdown-menu>li.selected {
                background-color: red !important;
            }

            .row1-3 select,
            .row1-3home select {
                background: #FFF;
                font-size: 12px;
                font-family: 'Open Sans', sans-serif;
                width: 94%;
                margin-left: 3%;
                margin-right: 3%;
                height: 40px;
                line-height: 40px;
                border: none;
                padding-left: 10px;
                border-radius: none;
                margin-bottom: 5px;
                -moz-appearance: none;
            }

            .row1-3 select option,
            .row1-3home select option {
                color: #01afd2;
            }
            
            /*Added by Avinash for SSDR23-1810 START */     
            .row1-3home div button{     
            padding-top: 6px !important;        
            padding-bottom: 7.5 !important;     
            padding-bottom: 9px !important;     
            }       
            /*Added by Avinash for SSDR23-1810 END */
            

            .row1-3 select option:not(:checked),
            .row1-3home select option:not(:checked) {
                color: #9fa7b4;
            }

            .dropdown-menu {
                padding: 0px 0px !important;
            }

            .dropdown-menu li a:hover {
                background-color: #357E05 !important;
                color: #FFF !important;
            }

            .bootstrap .panel-default {
                border: 2px solid #c2c2c2;
            }

            .whiteBck.bootstrap.col-md-1.product-count {
                padding: 24px 0px;
            }

            .whiteBck.bootstrap.col-md-4.bgcolor {
                /*    margin-left: -1.6%;  */
                padding: 0;
                width: 28%;
            }

            .whiteBck.bootstrap.row.clearfix {
                margin-top: 0%;
                padding-bottom: 1px;
            }

            .affix {
                top: 0;
                width: 100%;
                z-index: 1;
            }

            .affix+.container-fluid {
                padding-top: 70px;
            }

            .bootstrap .glyphicon {}

            th.th-col-first {
                border-top: 2px solid #c2c2c2 !important;
                border-right-style: hidden !important;
            }

            .product-head-row {
                text-transform: uppercase;
            }

            .cust_select {
                /*  margin-left: -9.8%; */
                width: 30%;
            }

            /* .ButtonGo {
            margin-left: -6.4%;
            }*/

            .label_cust {}

            .bootstrap.dropdown.col-md-1.sortBy {
                margin-left: 2px;
                width: 10%;
                padding-top: 5px;
            }

            div#last4buysgraph {
                float: left;
                /*  margin-top: -21%; */
            }

            div#chart_div {
                width: 465px;
                height: 200px;
            }

            ul#ulSelect li a:hover {
                background-color: #D04629 !important;
            }

            #warning-message {
                display: none;
            }

            @media only screen and (max-width: 992px) {
                #wrapper {
                    display: none;   
            /* added by Avinash for SSDR23-1803 START */
            /*padding-top:1px;*/
            /* added by Avinash for SSDR23-1803 END */
                }

                #warning-message {
                    display: block;
                }
                .bootstrap.row.mntnce {
                    display: none !important;
                }
            
            }
                      
           @media only screen and (min-width: 992px) {
                /*.whiteBck, .bootstrap.col-md-5.font11NCB.rfresh, .font11NCB.lrnmore {
                        background-color: #f0f1f2 !important;
                    }
                        */
                #wrapper{
            display: block;
            /* code changed by Avinash for SSDR23 - 1757 START */
            overflow-y:hidden;
             height: 41rem;
            /* code changed by Avinash for SSDR23 - 1757 END */
                    }

                    #warning-message {
                        display: none;
                    }
                    .bootstrap.row.mntnce {
                        display: block !important;
                    }

                    .tblNoPrdtsErr {
                        text-align: center;
                        color: red;
                    }

            /*
                    div#idAllErrorMsgs {
                        margin-top: 9% !important;
                    }
                        */
                    /*12/21:RB: Implemented Webkit for smooth scrolling for touch devices */
                    div#iddDiv {
                        -webkit-overflow-scrolling: touch !important;
                    }
                    
                    

                    .font-weight {
                        font-size: 12px !important;
                    }
                    
                    .bootstrap .nav > li > a {
                        position: relative;
                        display: block;
                        /*Changed by Avinash Singh for SSDR23-1761 START*/
                        padding: 0px 0px;
                        /*Changed by Avinash Singh for SSDR23-1761 START*/
                    }

                    .bootstrap .table-bordered,
                    .bootstrap .table-bordered > tbody > tr > td,
                    .bootstrap .table-bordered > tbody > tr > th,
                    .bootstrap .table-bordered > tfoot > tr > td,
                    .bootstrap .table-bordered > tfoot > tr > th,
                    .bootstrap .table-bordered > thead > tr > td,
                    .bootstrap .table-bordered > thead > tr > th {
                        padding: 0;
                    }

                    .bootstrap.col-md-12.pricing_tab {
                        padding: 0 !important;
            /* code changed by Avinash for SSDR23 - 1757 START */
            height: 22rem;
            /* code changed by Avinash for SSDR23 - 1757 END */
                    }

                    .col-md-12.font-weight.prcng_left {
                        padding-right: 0 !important;
                    }

                    .bootstrap.dropdown.col-md-3.col-sm-3.sorby {
                        padding: 0 !important;
                    }

                    .bootstrap.col-md-9.col-sm-9.grop {
                        width: 68% !important;
                    }

                    .bootstrap.dropdown.col-md-3.col-sm-3.grp {
                        width: 32% !important;
                    }

                    th.last-buy {
                        padding: 2px !important;
                    }

                    div#last4buys {
                        padding: 0 !important;
                    }

                    select#idSelFilterBy {
                        white-space: nowrap !important;
                    }

                    .col-md-4.col-sm-4.setmaxdiv {
                        padding: 0 !important;
                    }

                    .col-md-4.col-sm-4.settargetdiv {
                        padding: 0 !important;
                    }

                    .col-md-4.col-sm-4.setmindiv {
                        padding: 0 !important;
                    }

                    .bootstrap.col-md-5.col-sm-5.font11NCB.rfresh {
                        width: 38% !important;
                    }

                    .font11NCB.col-md-2.col-sm-2 {
                        margin: 2.5% 0% 0% -1% !important;
                        width: 18% !important;
                    }

                    .whiteBck.bootstrap.col-md-3.col-sm-3.product-count {
                        width: 29% !important;
                    }

                    .Err_msg {
                        padding-top: 11px !important;
                        padding: none !important;
                    }

                    div#divPosCust {
                        margin: 0% !important;
                        padding: 0 !important;
                    }

                    .grpbyborder {
                        top: -22px !important;
                    }

                    .sorbyborder {
                        top: -22px !important;
                    }

                    div#chart_div {
                        width: 380px !important;
                        height: 200px !important;
                    }

                    div#last4buysgraph {
                        padding: 0 !important;
                    }

                    .bootstrap .table-bordered,
                    .bootstrap .table-bordered > tbody > tr > td,
                    .bootstrap .table-bordered > tbody > tr > th,
                    .bootstrap .table-bordered > tfoot > tr > td,
                    .bootstrap .table-bordered > tfoot > tr > th,
                    .bootstrap .table-bordered > thead > tr > td,
                    .bootstrap .table-bordered > thead > tr > th {
                        padding-left: 1px !important;
                        padding-right: 2px !important;
                    }
                }
            
             /* added by avinash SSDR23-1757 start*/
              @media only screen and (min-width: 1024px) {
                    div#iddDiv {
                    height: 46rem !important;
                    width: 100% !important;
                    padding: 0 !important;
                    overflow-y: scroll !important;
                    overflow-x: hidden !important;
                    max-height:470px;
                }
            
            }
            
            /*    added by avinash SSDR23-1757 end code */

                @media screen and (min-width: 400px) {
                    /*  .whiteBck.bootstrap.col-md-4.cust_select {
            margin-left: 3px;
            padding-bottom: 8px;
            } */
                    .whiteBck.bootstrap.col-md-4.bgcolor {
                        /*    margin-left: -1.6%;  */
                        margin-bottom: 8px;
                    }

                    .whiteBck.bootstrap.col-md-2.label_cust {
                        clear: both;
                        /*  width: 170px;  */
                        width: 150px;
                    }

                    .whiteBck.bootstrap.col-md-1.ButtonGo {
                        /*      width: 140px;
            margin-left: -84px; */
                        float: left;
                    }
                }

                .bootstrap .btn {
                    border: 1px solid #AAA !important;
                }

                #btnGo {
                    background-color: #5C8727;
                    /*width: 80px;*/
                    height: 36px;
                    border-radius: 0 !important;
                    font-family: Arial !important;
                    font-size: 13px;
                    padding-left: 7px;
                }

                .whiteBck.bootstrap.col-md-8.table-responsive.table-div {
                    width: 100%;
                    padding-left: 0%;
                    margin-top: 1%;
                }

                .h5.tm {
                    font-size: 13px;
                    font-family: arial narrow;
                    float: right;
                }

                .h5-tm-span {
                    font-weight: bold;
                    color: #228B22;
                    
                }

                .col-md-4.Ewl {
                    width: 66%;
                    padding: 0;
                }

                .whiteBck.bootstrap.breadcrumb.mt {
                    margin-top: -14px;
                    padding-left: 0%;
                }

                .mt-8250 {
                    width: 2px;
                    font-weight: 2000px;
                }

                .active-ewl {
                    display: inline-block;
                    list-style-type: none;
                    margin-left: 8px;
                }

                .mt-li {
                    list-style-type: none;
                    display: inline-block;
                }

                .mt-ewl {
                    display: inline-block;
                    list-style-type: none;
                    margin-left: 3px;
                    color: #228B22;
                }

                .whiteBck.bootstrap.col-md-1.product-count.Rtn-ml.Rtn-ml {
                    margin-left: 27%;
                }

                .tblNoPrdtsErr {
                    text-align: center;
                    color: red;
                }
        </style>
        <style>
            /* Note: Try to remove the following lines to see the effect of CSS positioning */

            .affix {
                top: 0;
                width: 100%;
                z-index: 1;
            }

            .affix+.container-fluid {
                padding-top: 70px;
            }

            .bootstrap .glyphicon {}

            th.th-col-first {
                border-top: 2px solid #c2c2c2 !important;
                border-right-style: hidden !important;
            }

            th.th-col-2 {
                border-top: 2px solid #c2c2c2 !important;
                border-right-style: hidden !important;
            }

            th.th-col-3 {
                border-top: 2px solid #c2c2c2 !important;
                border-right-style: hidden !important;
            }

            th.th-col-4 {
                border-top: 2px solid #c2c2c2 !important;
                border-right-style: hidden !important;
            }

            th.th-col-5 {
                border-top: 2px solid #c2c2c2 !important;
                border-right-style: hidden !important;
            }

            th.th-col-6 {
                border-top: 2px solid #c2c2c2 !important;
                border-right-style: hidden !important;
            }

            th.th-col-7 {
                border-top: 2px solid #c2c2c2 !important;
                border-right-style: hidden !important;
            }

            th.th-col-last {
                border-top: 2px solid #c2c2c2 !important;
                border-left-style: hidden !important;
            }

            .product-head-row {
                text-transform: uppercase;
            }

            .whiteBck.bootstrap.col-md-2.col-sm-2.label_cust {
                /* added by Avinash for SSDR23-1803 START */
                padding-left: 8px;
                padding-right: 0;
              /* added by Avinash for SSDR23-1803 END */
            }

            .btn-group.bootstrap-select.bootstrap.col-md-12.col-sm-12.dullGrayBck {
                padding: 0;
            }

            .btn-group.bootstrap-select.disabled.bootstrap.col-md-12.col-sm-12.lightGrayBck {
                padding: 0;
            }

            .showmore {
                font-weight: bold;
                color: #5C8727 !important;
                background-color: #f0f1f2;
                font-size: 93%;
                text-decoration: none;
            }

            .col-md-12.col-sm-12.underline {
                position: relative;
                border-top: 1px solid #AAA;
                /*    width: 91%;
            margin-top: 2%;
            left:4%;  */
            }

            /*Code changed by Avinash for user story SSDR23-1579 START */
            .underline1 {
                border-top: 1.25px solid #AAA;
            /*Code changed by Avinash for user story SSDR23-1579 END */
                margin-top: 2%;
                /*   width: 95%;
            margin-left: 2%;  */
            }
            

            ul.tab {
                list-style-type: none;
                margin: 0;
                padding: 0;
                background-color: #f1f1f1;
                margin-left: 9px;
            }

            /* Float the list items side by side */

            ul.tab li {
                float: left;
            }

            /* Style the links inside the list items */

            ul.tab li a {
                display: inline-block;
                text-align: center;
                padding: 10px 24px;
                font-size: 13px;
                margin-left: -22px;
                font-weight: bold;
            }

            /* Change background color of links on hover */

            ul.tab li a:hover {
                background-color: #FFF !important;
            }

            /* Create an active/current tablink class */

            ul.tab li a:focus,
            .active {
                /*   background-color: #FFF !important;  */
            }

            /* Style the tab content */

            .tabcontent {
                display: none;
                padding: 6px 12px;
                border-top: none;
            }

            .pricingdetails {
                font-weight: bold;
                height: 23px;
            }

            .showall {
                margin-left: 20%;
            }

            .showallprice {
                color: #3b3b3b;
                margin-left: -25%;
                padding-left: 0%;
            }

            .sortby {
                margin-left: -14%;
            }

            .row.divsortfilter {
                /*   height:60px;  */
                border: 1px solid #AAA;
                background-color: #f0f1f2;
            }

            .divfilter {
                margin-left: 1%;
                top: 13px;
                width: 30%;
            }

            div#imageLinkId {
                /*   width:26%;  */
                height: 120px;
                border: 1px solid #AAA;
                background-color: #FFF;
                padding: 0;

            }

            .tabsdiv {
                width: 75%;
                height: 35px;
                background-color: #f1f1f1;
                margin-top: -8%;
                border-top: 2px solid #c2c2c2;
                border-right: 2px solid #c2c2c2;
            }

            .col-md-12.col-sm-12.price {
                /*  margin-top: 5px;
            margin-left: 19px; */
                margin-top: 4%;
                padding: 0;
                margin-bottom: 4%;
            }

            .col-md-4.col-sm-4.crntpricediv {
                /*   float: left;
            width: 26%;
            height: 15%;
            margin-left: 4%;
            margin-top: 3%;   */
                padding-right: 0;

            }

            .prddetailsdiv {
                /*    width: 63%;
            margin-left: 35%;
            height: 40%;
            margin-top: -18%;   */
            }

            .col-md-8.col-sm-8.setdiv {
                border: 1px solid #AAA;
                float: right;
                width: 63%;
                /*   height: 15%;  
            margin-right: 2%;  
            margin-top: 3%;  */
                background-color: #FFF;
                padding: 0;
            }

            .col-md-4.col-sm-4.setmindiv {
                /*    width: 33%;
            height: 100%;
            float: left;  */
                font-size: 12px;
                font-weight: bold;
                font-family: Arial;
                text-align: center;
            }

            .setborder {
                border-left: 2px solid #c2c2c2;
                position: absolute;
                height: 47px;
            }

            .setborder1 {
                border-left: 2px solid #c2c2c2;
                float: right;
                margin-right: 34%;
                height: 47px;
                margin-top: -52px;
            }

            .col-md-4.col-sm-4.settargetdiv {
                /*    width: 33%;
            margin-left: 33%;
            height: 100%; */
                font-size: 12px;
                font-weight: bold;
                border-right: 1px solid #AAA;
                border-left: 1px solid #AAA;
                font-family: Arial;
                text-align: center;
            }

            .col-md-4.col-sm-4.setmaxdiv {
                /*   width: 33%;
            height: 100%;
            float: right; */
                font-size: 12px;
                font-weight: bold;
                font-family: Arial;
                text-align: center;
            }

            div#divMax {
                margin-top: 5%;
                color: #3B3B3B;
                margin-bottom: 5%;
            }

            .drivedetails {
                width: 93%;
                margin-left: 4%;
                height: 39px;
                margin-top: 5%;
                clear: both;
            }

            .pricingdiv {
                /*  margin-top: 20%; */
                width: 136%;
            }

            .pricingdiv1 {
                width: 40%;
                height: 157px;
                margin-left: 4%;
                margin-top: 10%;
                float: left;
            }

            .pricingdiv2 {
                width: 44%;
                /*  height: 140px; */
                margin-left: 53%;
                margin-top: -157px;
                float: left;
            }

            .rightsection {
                /*width:100%;height:50%;*/
            }

            div#divTanName {
                /*width: 100%;height: 14%;margin-top: 1%; margin-left: 0%;*/
                font-family: Arial;
                color: #3b3b3b;
                font-size: 14px;
                padding: 0;
            }

            div#divProdDesc {
                /*width: 100%;height: 41%;*/
                font-weight: bold;
                font-size: 18px;
                font-family: Arial;
                color: #3b3b3b;
                padding: 0;
            }

            .col-md-12.col-sm-12.prdplace {
                /*width: 100%;height: 15%;*/
                font-size: 14px;
                font-family: Arial;
                color: #3b3b3b;
                padding: 0;
            }

            .col-md-12.col-sm-12.prdscoop {
                /*width: 100%;height: 12%;*/
                font-weight: bold;
                font-size: 13px;
                font-family: Arial;
                color: #CF4520;
                padding: 0;
            }

            .currentpricespan {
                font-size: 13px;
                font-weight: bold;
                color: #3B3B3B;
                font-family: Arial;
            }

            .currentprice {
                font-size: 18px;
                font-weight: bold;
                color: #CF4520;
                font-family: Arial;
            }

            .setmin {
                /*margin-left: 22px;margin-top: 6px;*/
                margin-top: 5%;
                color: #3B3B3B;
                margin-bottom: 5%;
            }

            .setminrate {
                color: #5C8727;
            }

            .settarget {
                /*margin-left: 22px;margin-top: 6px;*/
                margin-top: 5%;
                color: #3B3B3B;
                margin-bottom: 5%;
            }

            .setmax {
                /*margin-left: 22px;margin-top: 1px;*/
            }

            .pricingvalue {
                float: right;
                font-weight: normal;
            }

            .sorbyborder {
                border-left: 1px solid #AAA;
                /*height: 400%;*/
                height: 335%;
                position: absolute;
                top: -24px;
                left: -20%;
            }

            .grpbyborder {
                border-left: 1px solid #AAA;
                /*height: 400%;*/
                height: 335%;
                position: absolute;
                top: -24px;
                /*left:-44%;*/
                left: -16%;
            }

            div#idDivUpdateRefresh {
                border-bottom: 1px solid #AAA;
                padding: 0 !important;
                /*width:60%!important;*/
                background-color: #FFF;
            }

            .tablediv {
                width: 100%;
                padding-left: 0%;
                margin-top: 1%;
            }

            
            div#iddDiv {
            <!-- Code added by Avinash for SSDR23-1579 START -->
               <!-- height: 453px; -->
                height:690px;
            <!-- Code added by Avinash for SSDR23-1579 END -->
                width: 100%;
                overflow-y: scroll;
                padding: 0;
                overflow-x: hidden;
            }

            div#iddDiv::-webkit-scrollbar {
             <!-- Code added by Avinash for SSDR23-1597 Start -->
               <!-- width: 5px; -->
            width: 8px;
             <!-- Code added by Avinash for SSDR23-1597 END -->
            }

            ul#ulSelect {
                width: 87%;
                margin-left: 3%;
            }

            button#selFilter {
                border-radius: 0 !important;
                /*width:100%;*/
                background-color: #838383;
                border-color: transparent;
                /*margin-left: -4%;*/
                white-space: normal;
            }

            .bootstrap.dropdown.col-md-1.sortby {
                margin-left: 0%;
                width: 10%;
                top: 20px;
            }

            .bootstrap.col-md-3.sort {
                margin-left: -8px;
                padding-left: 0%;
                top: 13px;
            }

            select#idSelSortBy {
                size: 3;
                width: 30%;
                font-face: HelveticaNeue;
                font-size: 13px;
                font-color: #ffffff;
            }

            .bootstrap.dropdown.col-md-1.groupby {
                margin-left: 0%;
                width: 10%;
                top: 20px;
            }

            .bootstrap.col-md-3.group {
                margin-left: -1%;
                padding-left: 0%;
                top: 13px;
            }

            select#idSelGrouptBy {
                size: 3;
                width: 30%;
                font-face: HelveticaNeue;
                font-size: 13px;
                font-color: #ffffff;
            }

            button#btnMaintenance {
                background-color: #56821F;
                border-radius: 0 !important;
                font-family: Arial !important;
                font-size: 13px;
                border: 0 none !important;
            }

            .font11NCB.rfresh {
                margin-top: 4.5%;
                padding: 0;
                margin-left: -1%;
            }

            a#rfrsh {
                text-decoration: none;
                color: #5C8727 !important;
            }

            span.bootstrap.glyphicon {
                color: red;
                margin-top: -15px;
                font-weight: bold;
            }

            span#lastrfresh {
                font-weight: 100;
                font-size: 13px;
                color: #3B3B3B;
                font-family: Arial !important;
            }

            .font11NCB.lrnmore {
                float: right;
                background-color: #FFF;
                padding: 0;
                width: 96px;
                margin-top: 4.5%;
            }

            a#lrnmre {
                text-decoration: none;
                color: #5C8727 !important;
            }

            .bootstrap .nav>li>a {
                color: #828282;
            }
            
            /*Code changed by Avinash for user story SSDR23-1579 END */
            .last4buyvalues{            
            font-family: Arial;
            height: 22px;
            color: #3b3b3b;
            font-size: 13px;            
            float: right;
            font-weight: normal;
            }
            /* Code changed by Avinash for user story SSDR23-1579 END */
            
            
           
        </style>
        <style>            
            div#idAllErrorMsgs {
            <!-- changed by Avinash For SSDR23-1759 START -->
                margin-top: 1%;
            <!-- changed by Avinash For SSDR23-1759 END -->
            }

            .ytable {
                font-family: arial, sans-serif;
                border-collapse: collapse;
                width: 300%;
            }
            
            /*Added by Avinash Singh for SSDR23-1761 START*/
            nav#rightnavpricing{            
            position: relative;
            min-height: 35px;
            margin-bottom: 0px;
            border: 1px solid transparent;
            }
            
            
            
            .bootstrap .table>tbody>tr>td, .bootstrap .table>tbody>tr>th, .bootstrap .table>tfoot>tr>td, .bootstrap .table>tfoot>tr>th, .bootstrap .table>thead>tr>td, .bootstrap .table>thead>tr>th {
            padding: 0px 8px 0px 8px;
            line-height: 1.42857143;
            vertical-align: top;
            border-top: 1px solid #cfd0d2;}
            
            /* Added by Avinash Singh for SSDR23-1761 END   */
            

            th.last-buy {
                text-align: left;
                padding: 8px;
                background-color: #666666;
                color: #ffffff;
            }


            .font24DivCel {
                font-size: 12px;
            
            
                color: #3b3b3b !important;
            }

            <!-- changed by Avinash for SSDR23-1579 START -->
           tr {
                border-left: 1px solid #666666;
                border-bottom: 1px solid #666666;
                border-right: 1px solid #666666;
            }
            <!-- changed by Avinash for SSDR23-1579 END -->

            #idLastFourBuys td {
                border-left: 1px dashed #666666
            }

            .bootstrap.col-md-3.col-sm-3.dropdown.ShowallFilter {
                /*margin-left: -2%;*/
                padding: 0;
                width: 26%;
            }

            .bootstrap.dropdown.col-md-1.sorby {
                margin-left: 3.5%;
                margin-top: 1%;
            }

            .bootstrap.col-md-3.sor {
                padding: 0;
                margin-left: -2%;
            }

            .bootstrap.dropdown.col-md-1.grp {
                margin-left: 7%;
                margin-top: 1%;
            }

            .bootstrap.col-md-3.grop {
                padding: 0;
                margin-left: -2%;
            }

            .bootstrap.col-md-5.font11NCB.rfresh {
                /*  padding: 33px;  */
                background-color: #FFF;
            }

            .whiteBck.bootstrap.col-md-5.product-count {
                padding: 24px 0px;
            }

            .btn-group.bootstrap-select.whiteBck.bootstrap.col-md-12 {
                padding: 0;
            }

            .bootstrap.col-md-12.drive {
                padding: 0;
                margin-top: 2%;
            }

            .whiteBck.bootstrap.col-md-4.col-sm-4.cust_select {
                padding: 0;
            }

            .bootstrap.col-md-4.col-sm-4.sorting {
                margin-left: 3.5%;
                padding: 0;
            }

            .bootstrap.dropdown.col-md-3.col-sm-3.sorby {
                padding-left: 0;
                margin-top: 3%;
            }

            .bootstrap.col-md-9.col-sm-9.sor {
                padding: 0;
            }

            .bootstrap.col-md-4.col-sm-4.grouping {
                padding: 0;
                margin-left: 3%;
            }

            .bootstrap.dropdown.col-md-3.col-sm-3.grp {
                padding: 0;
                margin-top: 3%;
                margin-left: 0%;
            }

            .bootstrap.col-md-9.col-sm-9.grop {
                padding: 0;
            }

            li.margin {
                margin: 0;
                border-top: 1px solid #AAA;
                border-right: 1px solid #AAA;
                font-weight: bold;
                font-family: Arial;
                font-size: 16px;
                background-color: #D8D8D8;
            }

            .bootstrap .nav-tabs>li.active>a,
            .bootstrap .nav-tabs>li.active>a:focus,
            .bootstrap .nav-tabs>li.active>a:hover {
                border: transparent;
            }

            .bootstrap .nav-tabs {
                /*border-bottom:1px solid #AAA!important;*/
            }

            .round {
                color: white;
                background-image:url({!URLFOR($Resource.PricingUI, '/PricingUI/icons/filter-32.png')});
            background-size: 15px 15px;
            background-position: center left 0.1%;
            background-repeat: no-repeat;
            background-color: #767676;
            border: thin solid #767676;
            display: inline-block;
            font: inherit;
            line-height: 1.2em;
            padding: 0.5em 0em 0.5em 2em;

            /* reset */

            margin: 0;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            -webkit-appearance: none;
            -moz-appearance: none;
            }

            .font-weight {
                font-weight: bold;
                font-family: Arial;
                height: 22px;
                color: #3b3b3b;
                font-size: 13px;
            }

            select#idSelFilterBy {
                white-space: normal;
                font-family: Arial;
                font-size: 13px;
                padding-left: 30px;
                height: 31px;
            }

            /*    .bootstrap.col-md-12.col-sm-12.pricing_section {
            margin-top: 2%;
            }  */

            table#watchListTable {
                width: 100%;
                border-left: 2px solid #AAA;
                border-right: 2px solid #AAA;
            }

            div#last4buys {
                float: left;
                /*  margin-top: -21%!important;  */
            }

            .bootstrap.col-md-5.pricing_lft_tab {
                padding: 0;
            }

            .bootstrap.col-md-7.pricing_right_tab {
                padding: 0;
            }

            .Err_msg {
                /*  padding: 0!important; */
                margin: 0 !important;
                font-size: small !important;
            }

            .whiteBck.bootstrap.col-md-3.col-sm-3.product-count {
                padding-top: 2%;
                padding-left: 0;
            }


            .bootstrap.col-md-5.col-sm-5.font11NCB.rfresh {
                /*  padding-bottom: -3%;*/
                margin-top: 2.5%;
                width: 45%;
            }


            .bootstrap.col-md-1.col-sm-1.font11NCB.lrnmore {
                /* margin-top: -3%; */
                margin-bottom: 2%; /* padding-bottom: 2%; */
                margin-top: 2.5%;
                /* padding-bottom: -37%; */
            }





            table.bootstrap.table.last4buy_table {
                font-family: Arial;
            /* added by Avinash for SSDR23-1803 START */ 
                padding-left: 27px;
             /* added by Avinash for SSDR23-1803 END */ 
            }

            span.text {
                font-family: Arial;
            }

            h5.noOrdGuidOpp {
                font-weight: 800;
            }

            button#idAddPrdBtn {
                width: 18%;
                margin-left: 3.5%;
                background: #5C8727;
                color: #ffffff;
            }

            div#idDivNoPrds {
                border: 1px solid #AAA;
            }

            .bootstrap .btn-default {
                color: #3b3b3b;
                font-size: 13px;
                font-family: Arial;
            }

            .btn-group.bootstrap-select.bootstrap.col-md-12.col-sm-12.lightGrayBck {
                padding: 0;
            }

            .bootstrap.col-md-8.col-sm-8.pricing_left {
            /*width: 70%;*/ 
                padding: 0;
            }

            .col-md-12.col-sm-12.product {
                padding: 0;
            /* margin-top: 4%;*/
            }

            .col-md-12.col-sm-12.rightsection_2 {
                padding: 0;
            }

            .col-md-12.col-sm-12.divcrntprice {
                padding-right: 0;
            }

            tr#noErrorRow {
                background-color: #FFF2D4;
            }

            .Err_fontcolor {
                color: #FFF !important;
            }

            /*  div#headerlevelErrdivId {
            margin-top: 4%;
            } */

            .bootstrap.col-md-8.col-sm-8.grpHeaderNames {
                margin-top: 2%;
                background-color: transparent;
              /* added by Avinash for SSDR23-1803 START */
                padding-left: 8px;
              /* added by Avinash for SSDR23-1803 END */
            }

            
            tr#noPrdsIdGrpFilter {
                border-left: hidden;
                border-right: hidden;
            }

            th#idHeaderRowGrpFilter {
                text-align: center;
                font-family: Arial;
                font-size: 13px;
                color: #3b3b3b;
                vertical-align: middle;
            }

            .scroll-box {
                width: 100%;
                height: 295px;
                overflow-y: scroll;
            }

            .scroll-box::-webkit-scrollbar {
                width: .4em;
            }

            .scroll-box::-webkit-scrollbar,
            .scroll-box::-webkit-scrollbar-thumb {
                overflow: visible;
                border-radius: 4px;
            }

            .scroll-box::-webkit-scrollbar-thumb {
            <!-- Code added by Avinash for SSDR23-1597 Start -->
            <!--  background: rgba(0, 0, 0, .2); -->
            background-color: #5c8727;
            <!-- Code added by Avinash for SSDR23-1597 END -->
            }
        </style>
    </head>
<!-- added by avinash SSDR23-1757 START-->
    <body class="clsGrid bootstrap container-fluid " style=" padding:0px; overflow: visible; min-height:41rem; background-color: #fff; ">
        <!-- added by avinash SSDR23-1757 END-->
        <apex:form >
            <apex:actionFunction name="navigateToURLFunc" action="{!navigateToURL}" rerender="">
                <apex:param name="firstParam" assignTo="{!url}" value="" />
            </apex:actionFunction>
        </apex:form>
        <!-- 1554 - Commented below logic - Phani Kumar -->
        <!--<ol class="whiteBck bootstrap breadcrumb mt">
            <li class="mt-li"></li>
            <li class="font12NR mt-ewl">
                <div class="mt-8250"></div>
            </li>
            <li class="font12NR active-ewl"></li>
        </ol>
        <div class="bootstrap row mntnce">
            <div class="col-md-4 Ewl">
                <h1 class="font48NCB">Maintenance</h1>
            </div>
            <div class="col-md-4">
            </div>

        </div>-->
        <div id="wrapper">

            <!--Removed TM Name Hyperlink by ADUA from here and placed at the end on this Div-->
             <!-- changed by Avinash for SSDR23-1810 START -->
            <div class="whiteBck bootstrap col-md-12 col-sm-12 row clearfix" style="padding-bottom: 1.5%;">
                 <!-- changed by Avinash for SSDR23-1810 END -->
<!-- ~DEV-NOTE(ADUA) - Here Total Column sum is 11 and not 12 as screen wraps after 11th on iPhones-->
                <!-- Vyas - 2096 - Modified below line -->
                <div class="whiteBck bootstrap col-md-2 col-sm-2 label_cust" style="width:8%;"><span class="font21NCB">Pricing for</span></div>
                <div class="whiteBck bootstrap col-md-3 col-sm-3 cust_select" style="padding-left: 5px;padding-right: 1px;">
                    <div class="row1-3home" style="padding-left: 5px;padding-right: 1px;">
                        <select class="bootstrap col-md-12 col-sm-12 dullGrayBck selectpicker" style="padding-left: 5px;padding-right: 1px;" onchange="onCustomerChange()" data-width="95%" id="mntWatchList">
                            </select><!--span>&nbsp;&nbsp;-</span-->
                    </div>
                </div>
                <!-- changed by Avinash for story SSDR23-1742 START --> 
                <div class="whiteBck bootstrap col-md-2 col-sm-2 bgcolor" style="padding-left: 1px;">
                    <!-- changed by Avinash for story SSDR23-1742 END --> 
                    <select class="bootstrap col-md-12 col-sm-12 lightGrayBck selectpicker " id="mntDptList" onchange="onDepartmentChange()" data-style="btn-inverse" data-width="100%" title="Select a Department" disabled="true">
                        </select>
                </div>
                <div class="whiteBck bootstrap col-md-1 col-sm-1 ButtonGo" style="padding-left: 0px;width:5%"><button id="btnGo" class="font13NCBWhite bootstrap col-md-12 col-sm-12 btn" disabled="true" onclick="redirectToOrderGuide()">Go</button></div>
                <!--  SSCD-97 -starts-->
                <!-- changed by Avinash for story SSDR23-1742 START --> 
                <div class="whiteBck bootstrap col-md-1 col-sm-1" style="width:9%">
                    <!-- changed by Avinash for story SSDR23-1742 END --> 
                    <apex:outputpanel rendered="{!objUserProfName.Profile.Name != 'USF_TerritoryManager'}"> 
                        <!-- changed by Avinash for story SSDR23-1742 START -->  
                        <h5 class="h5 tm">
                        <b>Account Owner:</b>
                        <span class="h5-tm-span" onClick="navigateToURLFunc('/apex/VFP_Pricing_TM');"><a href = "#" style="color: #56821F;">{!userinfromation.Name}({!userinfromation.Sales_Route__c})</a></span>
                        </h5> 
                        <!-- changed by Avinash for story SSDR23-1742 END --> 
                    </apex:outputpanel>
                </div>
                
                <!--  SSCD-97 -ends-->
                <!-- Vyas - 2096 - STARTS-->
                <div class="whiteBck bootstrap col-md-1 col-sm-1" style="width:15%; background-color: transparent !important;">
                    <h5 class="h5 tm" style="margin-top: 2px; margin-bottom: 2px;">
                        <b>CB Adoption (QTD):</b><span class="h5-tm-span" id="sellerCbAdoption"></span><br/>
                        <b>Lines to Give Over 75%:</b><span class="h5-tm-span" id="linesNeededToGive"></span>
                    </h5>
                </div>
                <!-- Vyas - 2096 - ENDS-->

                <!--  SSCD-97 -starts-->
                <div class="whiteBck bootstrap col-md-1 col-sm-1 font11NCB lrnmoreTop" style="margin-top:15px;"><a href="#" id="lrnmre" onclick="learnmorefunc()"><!--<img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/learn-more-32.png')}" width="15" height="15" style="margin-right:5px;"/>--><span class="bootstrap glyphicon"></span>Learn More</a></div> 
                <!--  SSCD-97 -ends-->
                
                
                <!-- Commented by ADUA for SSCD-97
                <apex:outputpanel rendered="{!objUserProfName.Profile.Name != 'USF_TerritoryManager'}">
                    <div class="col-md-2 col-sm-2">
                        <h5 class="h5 tm"><b>TM:</b><span class="h5-tm-span" onClick="navigateToURLFunc('/apex/VFP_Pricing_TM');"><a href = "#">{!userinfromation.Name}({!userinfromation.Sales_Route__c})</a></span></h5>
                    </div>
                </apex:outputpanel>-->

            </div>

            <!--  <div id="headerlevelErrdivId"></div> -->
            <div id="idAllErrorMsgs"></div>
            <div id="idCPRUpdateError" hidden="true"></div>

            <div class="bootstrap col-md-12 col-sm-12 pricing_section">
                <div class="bootstrap whiteBck col-md-8 col-sm-8 pricing_left">

                    <!--  SSCD-97 -starts-->
                        <style>
                            /* Appirio KR  temp located here so i dont have to scroll will move to top of page later */
                            .lrnmoreTop {
                         
                            }

                            .divsortfilter {
                               margin-bottom:10px;
                            } 
                            .search-divin {
                                position: relative;
                                width: 95%;
                            }
                            .searchdiv {
                                background-color: #FFF;
                                height: 20px;
                                position: absolute;
                                right: 10px;
                                top: 5px;
                                z-index: 2;
                            }

                            .search-icon {
                                margin-top: 4%;
                                margin-left: 7%;
                            }

                            .searchhBarSection {
                                padding: 10px;
                            }

                            .refreshBarSection {
                                padding: 10px 1px !important;
                                border-left: 1px solid #AAA;
                                text-align: center;
                                height: 56px;
                            }

                            .editBarSection {
                                padding: 10px;
                                border-left: 1px solid #AAA;
                                text-align: center;
                                line-height: 40px;
                                height: 56px;
                            }

                            .filterBarSection {
                                padding: 10px;
                                border-left: 1px solid #AAA;
                                text-align: center;
                                height: 71px;
                            }

                            .sortBarSection {
                                padding: 10px;
                                border-left: 1px solid #AAA;
                                text-align: center;
                                height: 71px;
                            }

                            .groupBarSection {
                                padding: 10px;
                                text-align: center;
                                height: 71px;
                            }

                            .cprBarSection {
                                padding: 10px 1px !important;
                                border-left: 1px solid #AAA;
                                text-align: center;
                                height: 71px;
                                line-height: 50px;
                            }


                        </style>                        

                        <div class="bootstrap whiteBck col-md-12 col-sm-12" hidden="true" id="idPricingFilterSection1">
                            <div class="row divsortfilter">
                            
                                <div class="bootstrap col-md-6  col-sm-12 searchhBarSection">
                                    <div class="input-group stylish-input-group search-divin">
                                        <input type="text" class="whiteBck font13NR83 form-control search-field" id="idSearch" placeholder="Search Products" />                     
                                        <div class="searchdiv">                                
                                            <a href="#" onclick="FilterSortGroupByWatchListFunc()"><img class="search-icon" src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/search-32.png')}" width="15" height="15" /></a>
                                        </div>
                                    </div>
                                 </div>

                                <div class="bootstrap col-md-4 col-sm-6 font11NCB refreshBarSection ">
                                    <a href="#" id="rfrsh" onclick="refreshfunc()"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/refresh-32.png')}" width="15" height="15" style="margin-right:5px;"/><span class="bootstrap glyphicon"></span>Refresh Pricing</a><br/>
                                    <span id="lastrfresh"></span>                                     
                                </div>

                                <div class="bootstrap col-md-2 col-sm-6 font11NCB editBarSection" id="editListHyperlink">
                                    <a href="javascript://" style="text-decoration: none;color:#5C8727 !important;" onClick="NavigatingOrdrGuidPagFunc()"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/watch-list-color-32.png')}" width="15" height="15" style="margin-right:5px;"/><span class="bootstrap glyphicon" style="color:red;margin-top:-15px;font-weight:bold;"></span>Edit List</a>
                                </div>


                            </div>
                        </div>
                                               

                        <div class="bootstrap whiteBck col-md-12 col-sm-12" hidden="true" id="idPricingFilterSection2">
                            
                            <div class="row divsortfilter">
                            
                                <div class="bootstrap col-md-3 col-sm-6 dropdown filterBarSection">   
                                    <div class="bootstrap dropdown col-md-12">                                            
                                            <font class="font12NCB " style="white-space: nowrap;">Filter By</font>
                                        </div>                                      
                                    <select class="bootstrap col-md-12 round" onChange="javascript:FilterSortGroupByWatchListFunc()" id="idSelFilterBy" autocomplete="off">                                            
                                        <option >CBA/Deviation Products</option>
                                        <option value="CPR Auto Assist">CPR Auto Assist</option><!--Added By SSDR23-566 Phani--> 
                                        <option >No CPR Established</option><!--Added  for SSDR23-1582 sowmya--> 
                                        <option >Not between TGT to MAX</option>                                        
                                        <option >Product Errors</option>  
                                        <option >Show All</option>
                                        <option >Show All Above Max</option>    <!--Added  for SSDR23-1583-->
                                        <option >Show All Below Min</option>    <!--Added  for SSDR23-1583-->
                                        <option >Show All Market Change</option>
                                        <option selected="selected">Show All Price Changed</option>                                            
                                    </select>
                                </div> 

                                    <div class="bootstrap col-md-3 col-sm-6 sortBarSection">
                                        <div class="bootstrap dropdown col-md-12 sorby">                                            
                                            <font class="font12NCB sort" style="white-space: nowrap;">Sort by</font>
                                        </div> 
                                        <div class="bootstrap col-md-12 sor">
                                            <select class="whiteBck bootstrap col-md-12 col-sm-12 selectpicker" onChange="javascript:FilterSortGroupByWatchListFunc()" role="menu" id="idSelSortBy" >
                                                <option class="whiteBck abc sortby">Customer (A-Z)</option>
                                                <option class="whiteBck abc sortby">GPD/GPP (Asc)</option>
                                                <option class="whiteBck abc sortby">GPD/GPP (Desc)</option>
                                                <option class="whiteBck abc sortby" >Market Change (Asc)</option><!--Phani added for story SSDR23-555--> <!-- Nimitha Moved up these for bug SSDR23-641-->
                                                <option class="whiteBck abc sortby" >Market Change (Desc)</option><!--Phani added for story SSDR23-555-->
                                                <option class="whiteBck abc sortby">Price Change (Asc)</option>
                                                <option class="whiteBck abc sortby" selected="selected">Price Change (Desc)</option>                                                
                                                <option class="whiteBck abc sortby" >Product Description (A-Z)</option>                                                
                                                <option class="whiteBck abc sortby">Target - Current (Asc)</option>
                                                <option class="whiteBck abc sortby">Target - Current (Desc)</option>
                                                <option class="whiteBck abc sortby">WWP (Asc) </option>
                                                <option class="whiteBck abc sortby">WWP (Desc)</option>
                                            </select>
                                        </div>
                                    </div>

                                    <div class="bootstrap col-md-3 col-sm-6 groupBarSection">
                                        <div class="bootstrap dropdown col-md-12 grp">  
                                            <font class="font12NCB grp-font" style="white-space: nowrap;">Group by</font>
                                        </div>
                                        <div class="bootstrap col-md-12 grop">
                                            <select class="whiteBck bootstrap col-md-12 col-sm-12 selectpicker" role="menu" id="idSelGrouptBy"  onChange="javascript:FilterSortGroupByWatchListFunc()" >                      
                                                <option class="whiteBck abc sortby">CBA End Date (Asc)</option>
                                                <option class="whiteBck abc sortby" selected="selected">Customer</option>
                                                <option class="whiteBck abc sortby" >No Grouping</option>
                                                <option class="whiteBck abc sortby" >PIM Class</option>
                                                <option class="whiteBck abc sortby">WWP (Asc)</option>
                                            </select>  
                                        </div>
                                    </div>

                                    <div class="bootstrap col-md-3 col-sm-6 cprBarSection">
                                         <button id="btnMaintenance" onclick ="updatePrdCPRValues();" class="font13NCBWhite bootstrap btn">Update Product CPRs</button>
                                    </div>


                            </div>
                        </div>
                        <!--  SSCD-97 -ends-->
                 <!--Commented out by ADUA for SSCD-97
                    <div class="bootstrap col-md-12 col-sm-12 pricing_section-left affix-top" data-offset-top="197" hidden="true" id="idPricingFilterSection">
                        <div class="row divsortfilter">
                            <div class="bootstrap  col-md-12 col-sm-12 panel-body  affix-top" data-offset-top="197">
                                <div class="bootstrap col-md-3 col-sm-3 dropdown ShowallFilter">

                                    <select class="bootstrap col-md-12 col-sm-12 round" onChange="javascript:FilterSortGroupByWatchListFunc()" id="idSelFilterBy" autocomplete="off">
                                            
                                            <option >CBA/Deviation Products</option>
                                            <option >Not between TGT to MAX</option>
                                            <!--R.M 02/01/2017 US1837: 
                                            <option >Product Errors</option>  
                                            <option >Show All</option>
                                            <option selected="selected">Show All Price Changed</option>
                                            
                                        </select>
                                </div>
                                <div class="bootstrap col-md-4 col-sm-4 sorting">
                                    <div class="bootstrap dropdown col-md-3 col-sm-3 sorby">
                                        <span class="sorbyborder"></span>
                                        <font class="font12NCB sort" style="white-space: nowrap;">Sort by</font>
                                    </div>
                                    <div class="bootstrap col-md-9 col-sm-9 sor">
                                        <select class="whiteBck bootstrap col-md-12 col-sm-12 selectpicker" onChange="javascript:FilterSortGroupByWatchListFunc()" role="menu" id="idSelSortBy">
                                                <option class="whiteBck abc sortby">Customer (A-Z)</option>
                                                <option class="whiteBck abc sortby">GPD/GPP (Desc)</option>
                                                <option class="whiteBck abc sortby">Price Change (Asc)</option>
                                                <option class="whiteBck abc sortby" selected="selected">Price Change (Desc)</option>
                                                <option class="whiteBck abc sortby" >Product Description (A-Z)</option>
                                                <option class="whiteBck abc sortby">Target - Current (Asc)</option>
                                                <option class="whiteBck abc sortby">Target - Current (Desc)</option>
                                                <option class="whiteBck abc sortby">WWP (Asc) </option>
                                                <option class="whiteBck abc sortby">WWP (Desc)</option>
                                            </select>
                                    </div>
                                </div>
                                <div class="bootstrap col-md-4 col-sm-4 grouping">
                                    <div class="bootstrap dropdown col-md-3 col-sm-3 grp">
                                        <span class="grpbyborder"></span>
                                        <font class="font12NCB grp-font" style="white-space: nowrap;">Group by</font>
                                    </div>
                                    <div class="bootstrap col-md-9 col-sm-9 grop">
                                        <select class="whiteBck bootstrap col-md-12 col-sm-12 selectpicker" role="menu" id="idSelGrouptBy" onChange="javascript:FilterSortGroupByWatchListFunc()">                      
                                                <option class="whiteBck abc sortby">CBA End Date (Asc)</option>
                                                <option class="whiteBck abc sortby" selected="selected">Customer</option>
                                                <option class="whiteBck abc sortby" >No Grouping</option>
                                                <option class="whiteBck abc sortby" >PIM Class</option>
                                                <option class="whiteBck abc sortby">WWP (Asc)</option>
                                            </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    
                    
                    <div class="bootstrap whiteBck col-lg-12 col-md-12 col-sm-12 divupdate" id="idDivUpdateRefresh" hidden="true">
                        <div class="whiteBck bootstrap col-md-3 col-sm-3 product-count"><button id="btnMaintenance" onclick="updatePrdCPRValues();" class="font13NCBWhite bootstrap btn">Update Product CPRs</button></div>
                        <div class="font11NCB col-md-2 col-sm-2" style="float:left; margin: 2.5% 0% 0% 0%;" id="editListHyperlink"><a href="javascript://" style="text-decoration: none;color:#5C8727 !important;" onClick="NavigatingOrdrGuidPagFunc()"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/watch-list-color-32.png')}" width="15" height="15" style="margin-right:5px;"/><span class="bootstrap glyphicon" style="color:red;margin-top:-15px;font-weight:bold;"></span>Edit List</a></div>
                        <div class="bootstrap col-md-5 col-sm-5 font11NCB rfresh"><a href="#" id="rfrsh" onclick="refreshfunc()"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/refresh-32.png')}" width="15" height="15" style="margin-right:5px;"/><span class="bootstrap glyphicon"></span>Refresh Pricing</a><span id="lastrfresh"></span></div>
                        <div class="bootstrap col-md-1 col-sm-1 font11NCB lrnmore"><a href="#" id="lrnmre" onclick="learnmorefunc()"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/learn-more-32.png')}" width="15" height="15" style="margin-right:5px;"/><span class="bootstrap glyphicon"></span>Learn More</a></div>
                    </div>
                -- commented for SSCD-97 -ends> 

                    <!--  <div class="bootstrap col-md-12 col-sm-12" style="margin-top: 1%;/*width:60%;*/background-color:#FFF;">
<div class="font11NCB" style="float:right;" ><a href="javascript://" style="text-decoration: none;color:#5C8727 !important;" onClick="NavigatingOrdrGuidPagFunc()"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/watch-list-color-32.png')}" width="15" height="15" style="margin-left: -24px;"/><span class="bootstrap glyphicon" style="color:red;margin-top:-15px;font-weight:bold;"></span>Edit List</a></div> 
</div>  -->


                    <div class="bootstrap col-md-12 col-sm-12 " id="idDivNoPrds" hidden="true">
                        <div class="bootstrap row container col-md-12 col-sm-12">
                            <div class="bootstrap jumbotron-fluid" id="noPrdts">
                                <h5 class="noOrdGuidOpp">&nbsp;&nbsp;&nbsp;&nbsp;There are no products in the Watchlist.</h5>
                            </div>
                            <div class="bootstrap jumbotron-fluid" id="idDivAddPrdBtn">
                                <button type="button" onClick="NavigatingOrdrGuidPagFunc()" id="idAddPrdBtn">Add Products</button>
                            </div>
                            <br/>
                        </div>
                    </div>

                    <div class="bootstrap jumbotron-fluid" id="noProductsForPriceChanged" hidden="true">
                        <h5 class="noOrdGuidOpp">&nbsp;&nbsp;&nbsp;&nbsp;There are no Price Changed Watchlist products.</h5>
                    </div>

                    <div id="load" style="visibility:hidden;">
                        <div id="idInfo">Please wait while the system refreshes your product and pricing information.</div>
                    </div>

                    <div class="whiteBck bootstrap col-md-12 col-sm-12 table-responsive scroll-box" style="tablediv" id="iddDiv" hidden="true">
                        <div id="divAccName"></div>
                        <table id="watchListTable" class="whiteBck table table-bordered " data-page-size="4">
                            <tbody id="tblProducts">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="bootstrap col-md-4 col-sm-4 pricing_section-right" hidden="true" id="idPricingSectionRight">
                    <div class="col-md-12 col-sm-12 rightsection">
                        <!-- changed by Avinash for SSDR23-1579 START -->
                        <div class="col-md-12 col-sm-12 font21NB" style="display:none">Product Details</div>
                        <div class="col-md-12 col-sm-12 underline" style="display:none"></div>
                        <!-- changed by Avinash for SSDR23-1579 END -->
                        <div class="col-md-12 col-sm-12 product">
                            <div class="col-md-4 col-sm-4 imgdiv" id="imageLinkId"></div>
                            <div class="col-md-8 col-sm-8 prddetailsdiv">
                                <div class="col-md-12 col-sm-12 prdaddress" id="divTanName"></div>
                                <div class="col-md-12 col-sm-12 productdiv" id="divProdDesc"></div>
                                <div class="col-md-12 col-sm-12 prdplace" id="divBrand"></div>
                                <div class="col-md-12 col-sm-12 prdplace"><span id="divPrdNumb"></span> | <span id="divPackSiz"></span></div>
                                
                            </div>
                            <div class="col-md-12 col-sm-12 prdscoop" style=" position: absolute;padding-left: 20rem; padding-top: 5rem;"
 id="prdScoopItemStatus">
                                    <span id="idTick"></span>
                                    <!-- added by Deepanshu for SSCD-207 - Greentick //commented until further clarification-->
                                    <span id="idSom"></span>
                                    <span id="idDWO"></span>
                                    <span id="idBREAKABLE"></span>
                                    <span id="idJIT"></span>
                                    <span id="idVS"></span>
                                    <span id="idDISC"></span>
                                    <span id="idScoop"></span>
                                    <span id="idPriceLocallyIndicator"></span>
                                </div>
                        </div>
                        <div class="col-md-12 col-sm-12 price">
                            <div class="col-md-4 col-sm-4 crntpricediv">
                                <div class="col-md-12 col-sm-12 divcrntprice"><span class="currentpricespan">Current Price</span><br/><span class="currentprice" id="spCurPrc"></span></div>
                            </div>
                            <div class="col-md-8 col-sm-8 setdiv">
                                <div class="col-md-4 col-sm-4 setmindiv">
                                    <a href="javascript://" onclick="SetFunc('spMin')" style="text-decoration:none;">
                                        <div class="setmin">Set Min<br/><span class="setminrate" id="spMin"></span></div>
                                    </a>
                                </div>
                                <!--    <span class="setborder"></span>   -->
                                <div class="col-md-4 col-sm-4 settargetdiv">
                                    <a href="javascript://" onclick="SetFunc('spTarg')" style="text-decoration:none;">
                                        <div class="settarget">Set Target<br/><span class="setminrate" id="spTarg"></span></div>
                                    </a>
                                </div>
                                <!--   <span class="setborder1"></span>   -->
                                <div class="col-md-4 col-sm-4 setmaxdiv">
                                    <a href="javascript://" onclick="SetFunc('spMax')" style="text-decoration:none;">
                                        <div class="setmax" id="divMax">Set Max<br/><span class="setminrate" id="spMax"></span></div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-sm-12 container rightsection_2">
                        <!-- Added by Avinash Singh for SSDR23-1761 START -->
                        <nav class="bootstrap navbar nav-tabs" id="rightnavpricing" role="navigation">
                            <!-- Added by Avinash Singh for SSDR23-1761 END -->
                            <div>
                                <ul class="bootstrap nav nav-tabs">

                                    <li class="active margin"><a href="#pricing" data-toggle="tab">Pricing</a></li>
                                    <!-- changed by Avinash for SSDR23-1579 START -->
                                    <li class="margin"><a href="#last4buys" data-toggle="tab" style="display:none">Last 4 Buys</a></li>
                                    <!-- changed by Avinash for SSDR23-1579 END -->
                                    <li class="margin"><a href="#last4buysgraph" data-toggle="tab">Last 4 Buys Graph</a></li>

                                </ul>
                            </div>

                        </nav>
                        <div class="tab-content">
                            <div class="tab-pane fade in active" id="pricing" style="/*padding-top:10%;visibility:visible;*/">
                                <!--Updated by ADUA for Grid CSS fix as per SSCD-1207-->
                                  
                                <div class="bootstrap col-md-12 col-lg-12 pricing_tab">  
                                   
                                     <!-- changed by Avinash for SSDR23-1579 START -->
                                    <div class="bootstrap col-sm-12 col-md-12 col-lg-6 pricing_lft_tab">
                                        <!-- changed by Avinash for SSDR23-1579 END --> 
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left">COM<span class="pricingvalue" id="spCOM"></span></div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left">Rationale<span class="pricingvalue" id="spRationale"></span></div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left">GPD<span class="pricingvalue" id="spGPD"></span></div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left">Break Surcharge<span class="pricingvalue" id="spBrkSurchrge"></span></div>                                        
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left">Each Price<span class="pricingvalue" id="spEachPrice"></span></div>
                                        <!--Added by ADUA for SSCD-292 -->
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left">CPR Date<span class="pricingvalue" id="cprAdjustedDate"></span></div>
                                        
                                    </div>
                                     
                                    <!-- changed by Avinash for SSDR23-1579 START -->
                                    <div class="bootstrap col-sm-12 col-md-12 col-lg-6 pricing_right_tab"> 
                                        <!--Added by ADUA for SSCD-473 -->
                                         <!-- changed by Avinash for SSDR23-1758 START -->
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left">CS QTY Available<span class="pricingvalue" id="caseQtyAvl"></span></div>
                                         <!-- changed by Avinash for SSDR23-1758 END -->
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left">EA QTY Available<span class="pricingvalue" id="eachQtyAvl"></span></div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left" style="display:none">Last Wk's Price<span class="pricingvalue" id="spLastWkPrice" style="display:none"></span></div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left pricing_right_tab">Last Wk's Price Date<span class="pricingvalue" id="spLastWkPriceDate"></span></div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left pricing_right_tab">CBA Number<span class="pricingvalue" id="spCBANumber"></span></div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left pricing_right_tab">CBA Amount<span class="pricingvalue" id="spCBAAmount"></span></div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight prcng_left pricing_right_tab">CBA End Date<span class="pricingvalue" id="spCBAEndDate"></span></div> 
                                    </div>
                                    <!-- changed by Avinash for SSDR23-1579 END -->
                                    
                                     <!-- changed by Avinash for SSDR23-1579 START -->
                                    <div class="col-md-12 col-lg-12 tab-pane" id="last4buys" style="/*padding-top:10%;visibility:hidden;*/">
                                       
                                        <table class="bootstrap table last4buy_table">
                                            <thead style="/*margin-top:-10%*/">
                                                <tr>
                                                    
                                                    <th class="last-buy font-weight">
                                                        INVOICE
                                                    </th>
                                                    <th class="last-buy font-weight">
                                                        INV DATE
                                                    </th>
                                                    <th class="last-buy font-weight">
                                                        WWP
                                                    </th>
                                                    <th class="last-buy font-weight">
                                                        PRICE
                                                    </th>
                                                    <th class="last-buy font-weight">
                                                        QTY
                                                    </th>
                                                    <th class="last-buy font-weight">
                                                        MTHD
                                                    </th>
                                                    <th class="last-buy font-weight">
                                                        DEPT
                                                    </th>
                                                </tr>
                                            </thead>
                                            <tbody id="idLastFourBuys">
                                            </tbody>                                        
                                        </table> 

                                    </div> 
                                     <!-- changed by Avinash for SSDR23-1579 END -->
                                    
                                   
                                    <div class="bootstrap col-sm-12 col-md-12 col-lg-12 underline1"></div>
                                    <div class="bootstrap col-sm-12 col-md-12 col-lg-12 drive">
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight">Driver<span class="font18NCB setminrate" id="driverInformation"></span></div>
                                        <div class="col-sm-12 col-md-12 col-lg-12 font-weight">Passenger<span class="font18NCB" id="passengerIndicator">NO</span></div>
                                    </div>
                                </div> 
                                <!-- changed by Avinash for SSDR23-1579 END --> 
                            </div>
                            
                                    
                            
                            <div class="col-md-12 tab-pane fade" id="last4buysgraph" style="/*padding-top:10%;visibility:hidden;*/">
                                <div id="chart_div">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="light" class="white_content">
                <!-- Learn More Popup Window  -->
                <div class="modal fade" id="myModal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <a href="#" onclick="closefunc()"><span style="float:right;"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/close-modal-32.png')}" width="15" height="15"/></span></a>

                                <h1 class="font48NCB modal-title">Learn More - Glossary of Terms</h1>
                            </div>
                            <div class="modal-body">
                                <h5 class="text-center">This glossary defines the terms and symbols within the Maintenance section</h5>
                                <table class="table table-striped" id="tblGrid" style="font-size:12px;">
                                    <tbody>
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/watch-list-color-32.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Add or remove product from Watch List</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a">PRODUCT</td>
                                            <td class="model-column-b">Column contains Product Description, ASYS Product Number, Pack Size and WWP</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a">PIM CLASS</td>
                                            <td class="model-column-b">Product's PIM (Product Information Master) class</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a">PACK SIZE</td>
                                            <td class="model-column-b">Product's pack size</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a">LAST 4 BUY QTY</td>
                                            <td class="model-column-b">Sum of last 4 buys within the past 30 days converted to eaches</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a">WWP</td>
                                            <td class="model-column-b">Weeks Without Purchase. If product was purchased in the last week, column will display "Curr". If there is no WWP data, column will display "Unknown".</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a">CURRENT / LAST WEEK</td>
                                            <td class="model-column-b">Current price and last week's price. Last Week's price is from the prior week's Friday's effective date and will be refreshed on Saturday.</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a">DOLLAR VARIANCE OVER
                                                <BR/>LAST WEEK</td>
                                            <!-- SV 01/17/2017: US-1827 Changed ? to ' in definition below. -->
                                            <td class="model-column-b">This is not a required field for the user to enter, but will default to 0. When a value isn't entered by the user (so that the value is 0), the product will display on the Watch List when the price has changed. If a value is entered, it will always be a positive value in this field. When the Current Price is subtracted from Last Week's Price, if the absolute value of the difference is greater than or equal to the entered value, this triggers an exception and the product will display on the Watch List.</td>
                                        </tr>
                                        <!-- RM 01/17/2017 -->
                                        <!--    <tr class="model-column"><td class="model-column-a">Price Method</td>
<td class="model-column-b">OVR  &nbsp;Override Price <br/>
eBKT Override Bracket <br/>
CON  &nbsp;Contract Price <br/>
CPR  &nbsp;Customer Pricing Rationale <br/>
BKT  &nbsp;Standard Bracket Default <br/>
LST  &nbsp;List Price <br/>
sBKT Foodshow Order <br/>
FS   &nbsp;Foodshow Override
</td>               
</tr>    -->
                                        <!-- RM 01/17/2017: US-1807- Updated Learn more icons as per the sheet from the line 3143-3202. -->
                                        <tr class="whiteBck bootstrap col-md-1 product-count model-close cls_TD_LrnMr"></tr>
                                        <tr>
                                            <td class="cls_Prd_Details">Icons Displayed in the Product List:</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/opportunity-coin-32.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Opportunity Product</td>
                                        </tr>
                                         <!-- Code added by Deepanshu for SSCD-297, statrs -->                                        
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.greenCheckmark)}" width="15" height="15"/></td>
                                            <td class="model-column-b">Product priced as Target or above</td> 
                                        </tr>                                        
                                        <!-- Code added by Deepanshu for SSCD-297, ends -->

                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/locally-priced-32.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Price is locally managed</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/sm-blue-arrow-up-16.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Current price is greater than last week's price</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/sm-gold-arrow-down-16.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Current price is less than last week's price</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/price-variance-32.png')}" width="15" height="15" /></td>
                                            <!--      //RM 01/16/2017:   Changed ?Price variance outside specified range? TO ?Price variance outside specified range indicated by user?.-->
                                            <td class="model-column-b">Price variance outside specified range indicated by user</td>
                                        </tr>

                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/passenger-24.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Passenger Item</td>
                                        </tr>
                                        <!--Start Oct 16th 2018 sowmya madarapu updated for SSDR23-541--> 
                                        <!-- Updated on 26 june 2019 Avinash Singh for SSDR23-1744 START-->
                                        <tr class="model-column">
                                            <td class="model-column-a">MKT</td>
                                            <td class="model-column-b">Market Change</td>
                                        </tr>
                                        <!-- Updated on 26 june 2019 Avinash Singh for SSDR23-1744 END-->
                                        <tr class="model-column">
                                            <!-- Updated on 26 june 2019 Avinash Singh for SSDR23-1744 START-->
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/cprassist24x24.png')}" width="15" height="15" title="tbd" /></td>
                                            <!-- Updated on 26 june 2019 Avinash Singh for SSDR23-1744 END-->
                                            <td class="model-column-b">CPR Auto Assist</td>
                                        </tr>
                                        
                                         <!--End Oct 16th 2018 sowmya madarapu updated for SSDR23-541-->                                       
                                        <!--End Oct 16th 2018 sowmya madarapu updated for SSDR23-541-->
                                        
                                        
                                        <!-- RM 01/17/2017 -->
                                        <tr class="whiteBck bootstrap col-md-1 product-count model-close cls_TD_LrnMr"></tr>
                                        <tr>
                                            <td class="cls_Prd_Details">Icons Displayed in the Product Details:</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/breakable-24.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Breakable</td>
                                        </tr>
                                        <!-- Code added by Deepanshu for SSCD-297, statrs -->
                                        <!--
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.CPR)}" width="22" height="12" /></td>
                                            <td class="model-column-b">CPR Adjusted</td>
                                        </tr> 
                                        -->
                                        <!-- Code added by Deepanshu for SSCD-297, ends -->
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/discontinued-24.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Discontinued </td>
                                        </tr>

                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/dwo-32.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Discontinued when out</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/just-in-time-24.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Just in time</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/locally-priced-32.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Locally Priced</td>
                                        </tr>
                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/scoop-24.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Scoop Product</td>
                                        </tr>


                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/special-order-24.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Special Order</td>
                                        </tr>

                                        <tr class="model-column">
                                            <td class="model-column-a"><img src="{!URLFOR($Resource.PricingUI, '/PricingUI/icons/vendor-shipped-24.png')}" width="15" height="15" /></td>
                                            <td class="model-column-b">Vendor Shipped</td>
                                        </tr>
                                        <!--    <tr class="model-column"><td class="model-column-a">Price Method</td>
<td class="model-column-b">1 ? OVR,2 ? eBKT,3 ? CON,4 ? CPR,<br/>5 - BKT,6 ? LST,7 ? sBKT,8 ? FS</td>               
</tr>
<tr class="model-column"><td class="model-column-a">1</td>
<td class="model-column-b">OVR (Override)</td>               
</tr>
<tr class="model-column"><td class="model-column-a">1</td>
<td class="model-column-b">OVR (Override)</td>               
</tr>
<tr class="model-column"><td class="model-column-a">1</td>
<td class="model-column-b">OVR (Override)</td>               
</tr>
<tr class="model-column"><td class="model-column-a">1</td>
<td class="model-column-b">OVR (Override)</td>               
</tr>  -->
                                    </tbody>
                                </table>
                                <div class="form-group">
                                    <div class="clearfix"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!--content part over-->
                <div class="whiteBck bootstrap col-md-1 product-count model-close">
                    <button class="font13NCBWhite bootstrap btn model-table-closebtn" id="model-table-closebtn" onclick="closefunc()" style="background-color:#747474;border-radius: 0 !important;left: 44%;">Close</button>
                </div>
            </div>

            <div id="fade" class="black_overlay">
            </div>
            <!--------end-------->
        </div>
        <div id="warning-message">
            <p> Your browser does not meet the minimum requirements to display this page. Please use either your Safari browser or iPad in landscape mode. This page is not designed to be viewed from a phone.</p>
        </div>
        <style>
            h1.modal-title {
                font-size: 15px;
                color: #CF4520 !important;
                font-family: HelveticaNeue-CondensedBold !important;
            }

            .modal-body {
                padding-top: 12px;
            }

            table#tblGrid {
                padding-top: 15px;
                border-spacing: 8px;
            }

            td.model-column-a {
                font-weight: bold;
                text-transform: uppercase;
                width: 30%;
            }

            h5.text-center {
                font-size: 13px;
                font-weight: 100;
            }

            .model-table-closebtn {
                position: absolute;
                left: 50%;
                right: 50%;
            }

            .model-close {
                padding: 25px 0px;
                border-top: 1px solid #c2c2c2;
            }

            .white_content {
                display: none;
                position: absolute;
                top: 2.5%;
                left: 25%;
                width: 40%;
                height: 678px;
                padding: 16px;
                background-color: white;
                z-index: 1002;
                overflow: auto;
            }

            .black_overlay {
                display: none;
                position: absolute;
                top: 0%;
                left: 0%;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.4);
                z-index: 1001;
                -moz-opacity: 0.8;
                opacity: .80;
                filter: alpha(opacity=80);
            }

            select#idSelFilterBy option:hover {
                box-shadow: 0 0 10px 100px #1882A8 inset !important;
            }

            .cust_select .dropdown-menu {
               width: 400px;
            } 
            
            .cust_select .dropdown-menu span.fl {
                float: left;
            }

            .cust_select .dropdown-toggle span.fr {
                margin-left: 10px;
            }

            .cust_select .dropdown-menu span.fr { 
                position: absolute;
                float: left;
                right: 0;
                margin-right: 30px;
                /* Updated by ADUA for SFS-1482 */
                pointer-events: none;
            }

            .idErrValue {
                color: white;
                background-color: #FF0000;
                border: 1px solid white;
                font-size: 13px;
                font-weight: bold;
                font-family: Arial;
                /*  float:left;  */
                margin-bottom: 6px;
                /*  width:99.3%; */
                padding: 10px 0px 10px 10px;
            }

            .clsSpan {
                color: red;
                position: absolute;
                float: left;
                right: 0;
                margin-right: 30px;
            }

            div#idAllErrorMsgs {
             <!-- changed by Avinash For SSDR23-1759 START -->
               padding-top: 5px; 
             <!-- changed by Avinash For SSDR23-1759 END -->
            }

            /*Updated by KR 1207 - fix detail swapping*/
            @media only screen and (min-width: 1200px) and (max-width: 1400px) {
                #pricing .pricing_tab div div {
                /*Changed by Avinash Singh for SSDR23-1761 START*/
            /* margin-bottom: 10px; */
                 /*Changed by Avinash Singh for SSDR23-1761 START*/
                }
            }

        </style>
    </body>
 
</apex:page>